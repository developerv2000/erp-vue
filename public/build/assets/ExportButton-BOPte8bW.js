import{u as h,h as g,c as R,o as v,w as t,a as e,z as L,bE as M,b as a,b$ as E,g as c,t as r,b8 as x,bF as O,bG as P,T as U,c0 as z,v as C,da as I,l as A,f as w,db as G,C as q,A as B,e as F,av as Q,F as W}from"./app-7F7n231s.js";import{u as D}from"./messages-BpNGX81Q.js";import{_ as f}from"./DefaultButton-CwMkA5bK.js";import{Q as S,L as T,W as $,G as H}from"./mdi-BZMfrfO1.js";import{_ as J,V as K}from"./InertiaLinkedListItem-D1cs0l0k.js";const oe={__name:"PermanentDeleteSelectedButton",props:{deleteLink:String,store:Object,actionOnSuccess:Function},setup(i){const l=i,{t:s}=h(),m=D(),u=g(!1);function p(){C.post(l.deleteLink,{ids:l.store.selected,force_delete:!0}).then(n=>{m.addDeletedSuccessfullyMessage(n.data.count),l.actionOnSuccess()}).catch(n=>{n.response?.status===422?m.addValidationErrors(n):m.addSubmitionFailedMessage()}).finally(()=>{u.value=!1})}return(n,d)=>(v(),R(z,{modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=o=>u.value=o),"max-width":"420"},{activator:t(({props:o})=>[e(f,U({color:"error",variant:"tonal",size:"default","prepend-icon":a(S)},o,{disabled:i.store.selected.length==0}),{default:t(()=>[c(r(a(s)("actions.Permanent delete")),1)]),_:1},16,["prepend-icon","disabled"])]),default:t(({isActive:o})=>[e(L,null,{default:t(()=>[e(M,{class:"pa-4","prepend-icon":a(S)},{default:t(()=>[e(E,null,{default:t(()=>[c(r(a(s)("actions.Permanent delete")),1)]),_:1})]),_:1},8,["prepend-icon"]),e(x),e(O,{class:"px-4 py-6"},{default:t(()=>[c(r(a(s)("modals.Delete selected permanently question"))+"? ",1)]),_:1}),e(x),e(P,{class:"pa-4"},{default:t(()=>[e(f,{class:"px-6",color:"grey-lighten-2",onClick:y=>o.value=!1},{default:t(()=>[c(r(a(s)("actions.Cancel")),1)]),_:1},8,["onClick"]),e(f,{class:"px-6",color:"error",onClick:p},{default:t(()=>[c(r(a(s)("actions.Permanent delete")),1)]),_:1})]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"]))}},le={__name:"RestoreSelectedButton",props:{restoreLink:String,store:Object},setup(i){const l=i,{t:s}=h(),m=D(),u=g(!1);function p(){C.post(l.restoreLink,{ids:l.store.selected}).then(n=>{u.value=!1,m.addRestoredSuccessfullyMessage(n.data.count),l.store.fetchRecords({updateUrl:!1})})}return(n,d)=>(v(),R(z,{modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=o=>u.value=o),"max-width":"400"},{activator:t(({props:o})=>[e(f,U({color:"success",size:"default",variant:"tonal"},o,{"prepend-icon":a(T),disabled:i.store.selected.length==0}),{default:t(()=>[c(r(a(s)("actions.Restore")),1)]),_:1},16,["prepend-icon","disabled"])]),default:t(({isActive:o})=>[e(L,null,{default:t(()=>[e(M,{class:"pa-4","prepend-icon":a(T)},{default:t(()=>[e(E,null,{default:t(()=>[c(r(a(s)("modals.Restore selected")),1)]),_:1})]),_:1},8,["prepend-icon"]),e(x),e(O,{class:"px-4 py-6"},{default:t(()=>[c(r(a(s)("modals.Restore selected question"))+"? ",1)]),_:1}),e(x),e(P,{class:"pa-4"},{default:t(()=>[e(f,{class:"px-6",color:"grey-lighten-2",onClick:y=>o.value=!1},{default:t(()=>[c(r(a(s)("actions.Cancel")),1)]),_:1},8,["onClick"]),e(f,{class:"px-6",color:"success",onClick:p},{default:t(()=>[c(r(a(s)("actions.Restore")),1)]),_:1})]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"]))}},ne={__name:"TrashListItem",props:{routeName:String},setup(i){const{t:l}=h();return(s,m)=>(v(),R(J,{title:a(l)("pages.Trash"),"prepend-icon":a(S),link:s.route(i.routeName)},null,8,["title","prepend-icon","link"]))}},X={key:0,class:"d-flex ga-4 align-center"},Y={key:1,class:"d-flex ga-4 align-center"},re={__name:"ExportButton",props:{model:String,store:Object},setup(i){const l=i,{t:s}=h(),m=D(),u=I(),p=g(!1),n=g(!1),d=g(!1),o=g(-1),y=A(()=>d.value?"success":"warning");function N(){d.value=!1,n.value=!0,o.value=-1,p.value=!0,C.post(route("excel-storage.generate",{model:l.model}),l.store.toQuery()).then(async b=>{await j(b.data.filename)})}async function j(b){n.value=!1,d.value=!0,o.value=5e3,p.value=!0,C.post(route("excel-storage.download",{model:l.model,filename:b}),{_token:u},{responseType:"blob"}).then(_=>{const V=window.URL.createObjectURL(new Blob([_.data])),k=document.createElement("a");k.href=V,k.setAttribute("download",b),document.body.appendChild(k),k.click(),k.remove()}).catch(()=>{m.addSubmitionFailedMessage()})}return(b,_)=>(v(),w(W,null,[e(f,{color:"warning",variant:"tonal",size:"default","prepend-icon":a($),loading:n.value,onClick:N},{default:t(()=>[c(r(a(s)("actions.Export")),1)]),_:1},8,["prepend-icon","loading"]),e(K,{class:"text-body-2",color:y.value,density:"compact",modelValue:p.value,"onUpdate:modelValue":_[1]||(_[1]=V=>p.value=V),location:"top right",timeout:o.value},G({default:t(()=>[n.value?(v(),w("div",X,[e(Q,{size:"20",indeterminate:""}),F("p",null,r(a(s)("files.Generating"))+"...",1)])):(v(),w("div",Y,[e(B,{icon:a($)},null,8,["icon"]),F("p",null,r(a(s)("files.Download started"))+"!",1)]))]),_:2},[d.value?{name:"actions",fn:t(()=>[e(q,{variant:"text",onClick:_[0]||(_[0]=V=>p.value=!1),icon:""},{default:t(()=>[e(B,{icon:a(H)},null,8,["icon"])]),_:1})]),key:"0"}:void 0]),1032,["color","modelValue","timeout"])],64))}};export{ne as _,le as a,oe as b,re as c};
