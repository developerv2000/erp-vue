import{u as $,d as x,h,m as S,s as w,D as y,v as q,c as M,o as U,w as s,a,b as e}from"./app-Bv235s-M.js";import{u as j,F as B}from"./vee-validate-B-1CKIak.js";import{u as E}from"./useVeeFormFields-J-_CRR1z.js";import{u as I}from"./useFormData-DEk4Ge6e.js";import{u as P}from"./messages-CrCj1jht.js";import{u as R}from"./useDateFormatter-cYKpR2k9.js";import{D as c}from"./DefaultSheet-kIGXXLen.js";import{_ as T}from"./DefaultWysiwyg-4IHBiKGV.js";import{F as z}from"./FormActionsContainer-Bg-aVW1K.js";import{_ as A}from"./FormResetButton-B0o_1JkG.js";import{_ as N}from"./FormStoreAndRedirectBack-rqUP_AYw.js";import{_ as O}from"./DefaultDateInput-Bd8T_AhU.js";import{_ as G}from"./DefaultFileInput-DBvx7X94.js";import{V as p,a as n}from"./VRow-DQpkIAa1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./StandardLabeledGroup-DHmFV98J.js";import"./DefaultButton-DBGLuZMW.js";import"./mdi-CnKAdudM.js";const ue={__name:"InvoicesCreateForm",setup(H){const{t:m}=$(),{objectToFormData:_}=I(),g=x(),i=P(),{removeDateTimezonesFromFormData:v}=R(),r=h(!1),F=S({receive_date:y().required(),pdf_file:w().required()}),u={receive_date:null,pdf_file:null,comment:null},{errors:d,handleSubmit:b,resetForm:V,setErrors:C,meta:D}=j({validationSchema:F,initialValues:{...u}}),{values:t}=E(Object.keys(u)),k=b(f=>{const o=_({...f,shipment_id:g.props.shipment.id});v(o),r.value=!0,q.post(route("import.invoices.store"),o).then(()=>{i.addCreatedSuccessfullyMessage(),window.history.back()}).catch(l=>{l.response?.status===422?(C(l.response.data.errors),i.addFixErrorsMessage()):i.addSubmitionFailedMessage()}).finally(()=>{r.value=!1})});return(f,o)=>(U(),M(e(B),{class:"d-flex flex-column ga-6 pb-8",enctype:"multipart/form-data"},{default:s(()=>[a(c,null,{default:s(()=>[a(p,null,{default:s(()=>[a(n,null,{default:s(()=>[a(O,{label:e(m)("dates.Receive"),modelValue:e(t).receive_date,"onUpdate:modelValue":o[0]||(o[0]=l=>e(t).receive_date=l),"error-messages":e(d).receive_date,required:""},null,8,["label","modelValue","error-messages"])]),_:1}),a(n,null,{default:s(()=>[a(G,{label:e(m)("fields.Pdf"),modelValue:e(t).pdf_file,"onUpdate:modelValue":o[1]||(o[1]=l=>e(t).pdf_file=l),"error-messages":e(d).pdf_file,accept:".pdf",required:""},null,8,["label","modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),a(c,null,{default:s(()=>[a(p,null,{default:s(()=>[a(n,{cols:"12"},{default:s(()=>[a(T,{modelValue:e(t).comment,"onUpdate:modelValue":o[2]||(o[2]=l=>e(t).comment=l),label:e(m)("Comment"),folder:"comments"},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),a(z,null,{default:s(()=>[a(A,{onClick:e(V),loading:r.value},null,8,["onClick","loading"]),a(N,{onClick:e(k),loading:r.value,disabled:!e(D).valid},null,8,["onClick","loading","disabled"])]),_:1})]),_:1}))}};export{ue as default};
