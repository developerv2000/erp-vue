import{u as g,d as y,i as b,c as h,o as d,w as t,g as i,t as o,b as a,a as m,f as k,k as x,e as T}from"./app-CQVFqoTu.js";import{u as v}from"./useQueryParams-D2yBeCAD.js";import{u as V}from"./invoices-C7sX6MEF.js";import{u as P}from"./useDateFormatter-Dohrib_q.js";import{_ as D,D as I,V as $}from"./TableNavigateToPage-Ch6VSmLc.js";import w from"./InvoicesTableTop-HlLyYVYP.js";import{T as N}from"./TableDefaultSkeleton-CrF3Vu3R.js";import{T as S}from"./TdInertiaLink-Cx0hgVY8.js";import{_ as c}from"./TogglableThreeLinesLimitedText-DZBOTZAV.js";import{_ as U}from"./TdRecordCommentsLink-DabP4a_Q.js";import{_ as B}from"./TdInvoicePaymentType-BojYCo2-.js";import"./queryHelper-LZTJtzGq.js";import"./createRecordActions-Ba682ZE6.js";import"./VTable-LjAPFHLB.js";import"./DefaultTableToolbar-PtA0RznB.js";import"./DefaultButton-B_v1FrQC.js";import"./mdi-BiCQTzTv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ColumnsListItem-Bi14HEMt.js";import"./VRow-DY7ZvkVD.js";import"./VSwitch-DgnXx1O6.js";import"./VNumberInput-BCJiuLoL.js";import"./FullscreenListItem-C0djHahF.js";import"./filter-DXn2-kQs.js";import"./InertiaLink-BY5vQ9VV.js";const E=["href"],F=["href"],_e={__name:"InvoicesTable",setup(L){const{t:O}=g(),{get:l}=v(),p=y(),r=V(),{formatDate:n}=P();b(()=>{(!r.initializedFromInertiaPage||l("initialize_from_inertia_page"))&&r.initFromInertiaPage(p),r.fetchRecords({updateUrl:!0})});const u=s=>{r.fetchRecordsIfOptionsChanged(s)},f=s=>s.map((_,e)=>`${e+1}. ${_.process.full_english_product_label}`).join("<br>");return(s,_)=>(d(),h($,{class:"main-table main-table--limited-height main-table--with-filter",headers:a(p).props.tableVisibleHeaders,modelValue:a(r).selected,"onUpdate:modelValue":_[0]||(_[0]=e=>a(r).selected=e),items:a(r).records,"items-length":a(r).pagination.total_records,page:a(r).pagination.page,"items-per-page":a(r).pagination.per_page,"items-per-page-options":a(I),"sort-by":[{key:a(r).pagination.order_by,order:a(r).pagination.order_direction}],"onUpdate:options":u,loading:a(r).loading,"must-sort":"","show-select":"","show-current-page":"","fixed-header":"",hover:""},{top:t(()=>[m(w)]),loading:t(()=>[m(N)]),"footer.prepend":t(()=>[m(D,{store:a(r)},null,8,["store"])]),"item.receive_date":t(({item:e})=>[i(o(a(n)(e.receive_date)),1)]),"item.payment_type_id":t(({item:e})=>[m(B,{type:e.payment_type.name},null,8,["type"])]),"item.sent_for_payment_date":t(({item:e})=>[i(o(a(n)(e.sent_for_payment_date)),1)]),"item.accepted_by_financier_date":t(({item:e})=>[i(o(a(n)(e.accepted_by_financier_date)),1)]),"item.pdf_file":t(({item:e})=>[T("a",{class:"text-primary",href:e.pdf_file_url,target:"_blank"},o(e.pdf_file),9,E)]),"item.order_title":t(({item:e})=>[m(S,{link:s.route("pld.orders.index",{"id[]":e.invoiceable_id,initialize_from_inertia_page:!0})},{default:t(()=>[i(o(e.invoiceable.title),1)]),_:2},1032,["link"])]),"item.order_manufacturer_name":t(({item:e})=>[i(o(e.invoiceable.manufacturer.name),1)]),"item.products":t(({item:e})=>[m(c,{text:f(e.products)},null,8,["text"])]),"item.order_country_code":t(({item:e})=>[i(o(e.invoiceable.country.code),1)]),"item.payment_request_date_by_financier":t(({item:e})=>[i(o(a(n)(e.payment_request_date_by_financier)),1)]),"item.payment_date":t(({item:e})=>[i(o(a(n)(e.payment_date)),1)]),"item.payment_completed_date":t(({item:e})=>[i(o(a(n)(e.payment_completed_date)),1)]),"item.number":t(({item:e})=>[i(o(e.number),1)]),"item.payment_confirmation_document":t(({item:e})=>[e.payment_confirmation_document?(d(),k("a",{key:0,class:"text-primary",href:e.payment_confirmation_document_url,target:"_blank"},o(e.payment_confirmation_document),9,F)):x("",!0)]),"item.comments_count":t(({item:e})=>[m(U,{record:e},null,8,["record"])]),"item.last_comment_body":t(({item:e})=>[m(c,{class:"main-table__last-comment",text:e.last_comment?.body},null,8,["text"])]),"item.created_at":t(({item:e})=>[i(o(a(n)(e.created_at)),1)]),"item.updated_at":t(({item:e})=>[i(o(a(n)(e.updated_at)),1)]),_:1},8,["headers","modelValue","items","items-length","page","items-per-page","items-per-page-options","sort-by","loading"]))}};export{_e as default};
