import{d as v,i as k,c,o as s,w as t,g as r,t as o,b as a,a as m,f as d,k as u,F as f,e as x}from"./app-Bv235s-M.js";import{u as P}from"./useQueryParams-Dab0YVoH.js";import{u as V}from"./productionTypeInvoices-BEvpVqUS.js";import{u as $}from"./useDateFormatter-cYKpR2k9.js";import{_ as T,D,V as F}from"./TableNavigateToPage-CCv4YDf_.js";import I from"./InvoicesTableTop-Mw4KAzze.js";import{T as w}from"./TableDefaultSkeleton-gBqwB-gP.js";import{_ as N}from"./TdEditButton-41ihSKtN.js";import{_ as y}from"./TogglableThreeLinesLimitedText-DTPersXd.js";import{_ as S}from"./TdRecordCommentsLink-CzX6cxvL.js";import{_ as U}from"./TdInvoicePaymentType-B9CTXdjw.js";import{_ as B,a as E}from"./TdInvoiceCompletePayment-e23BidiW.js";import"./queryHelper-LZTJtzGq.js";import"./createRecordActions-BovokYM8.js";import"./VTable-gLoNSE0h.js";import"./DefaultTableToolbar-5yNsS9nc.js";import"./DefaultButton-DBGLuZMW.js";import"./mdi-CnKAdudM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ColumnsListItem-BTQnhMsp.js";import"./VRow-DQpkIAa1.js";import"./VSwitch-PRR1uVDR.js";import"./VNumberInput-CfdQXUlt.js";import"./FullscreenListItem-DZu5p2fy.js";import"./filter-ELhmIoIq.js";import"./InertiaLinkedButtonedIcon-B7VDdgSl.js";import"./TdInertiaLink-B1cB9PSQ.js";import"./InertiaLink-DdC26tK5.js";import"./messages-CrCj1jht.js";import"./global-C9k2byRd.js";import"./useAuth-CEuMeYAP.js";const O=["href"],R=["href"],ye={__name:"InvoicesTable",setup(C){const{get:g}=P(),l=v(),i=V(),{formatDate:n}=$();k(()=>{(!i.initializedFromInertiaPage||g("initialize_from_inertia_page"))&&i.initFromInertiaPage(l),i.fetchRecords({updateUrl:!0})});const b=p=>{i.fetchRecordsIfOptionsChanged(p)},h=p=>p.map((_,e)=>`${e+1}. ${_.process.full_english_product_label}`).join("<br>");return(p,_)=>(s(),c(F,{class:"main-table main-table--limited-height main-table--with-filter",headers:a(l).props.tableVisibleHeaders,modelValue:a(i).selected,"onUpdate:modelValue":_[0]||(_[0]=e=>a(i).selected=e),items:a(i).records,"items-length":a(i).pagination.total_records,page:a(i).pagination.page,"items-per-page":a(i).pagination.per_page,"items-per-page-options":a(D),"sort-by":[{key:a(i).pagination.order_by,order:a(i).pagination.order_direction}],"onUpdate:options":b,loading:a(i).loading,"must-sort":"","show-select":"","show-current-page":"","fixed-header":"",hover:""},{top:t(()=>[m(I)]),loading:t(()=>[m(w)]),"footer.prepend":t(()=>[m(T,{store:a(i)},null,8,["store"])]),"item.edit":t(({item:e})=>[m(N,{link:p.route("prd.invoices.production-types.edit",e.id)},null,8,["link"])]),"item.receive_date":t(({item:e})=>[r(o(a(n)(e.receive_date)),1)]),"item.payment_type_id":t(({item:e})=>[m(U,{type:e.payment_type.name},null,8,["type"])]),"item.sent_for_payment_date":t(({item:e})=>[r(o(a(n)(e.sent_for_payment_date)),1)]),"item.accepted_by_financier_date":t(({item:e})=>[e.is_accepted_by_financier?(s(),d(f,{key:0},[r(o(a(n)(e.accepted_by_financier_date)),1)],64)):(s(),c(E,{key:1,"invoices-store":a(i),"invoice-id":e.id},null,8,["invoices-store","invoice-id"]))]),"item.pdf_file":t(({item:e})=>[x("a",{class:"text-primary",href:e.pdf_file_url,target:"_blank"},o(e.pdf_file),9,O)]),"item.order_title":t(({item:e})=>[r(o(e.invoiceable.title),1)]),"item.order_manufacturer_name":t(({item:e})=>[r(o(e.invoiceable.manufacturer.name),1)]),"item.products":t(({item:e})=>[m(y,{text:h(e.products)},null,8,["text"])]),"item.order_country_code":t(({item:e})=>[r(o(e.invoiceable.country.code),1)]),"item.payment_request_date_by_financier":t(({item:e})=>[r(o(a(n)(e.payment_request_date_by_financier)),1)]),"item.payment_date":t(({item:e})=>[r(o(a(n)(e.payment_date)),1)]),"item.payment_completed_date":t(({item:e})=>[e.payment_is_completed?(s(),d(f,{key:0},[r(o(a(n)(e.payment_completed_date)),1)],64)):e.can_complete_payment?(s(),c(B,{key:1,"invoices-store":a(i),"invoice-id":e.id},null,8,["invoices-store","invoice-id"])):u("",!0)]),"item.number":t(({item:e})=>[r(o(e.number),1)]),"item.payment_confirmation_document":t(({item:e})=>[e.payment_confirmation_document?(s(),d("a",{key:0,class:"text-primary",href:e.payment_confirmation_document_url,target:"_blank"},o(e.payment_confirmation_document),9,R)):u("",!0)]),"item.comments_count":t(({item:e})=>[m(S,{record:e},null,8,["record"])]),"item.last_comment_body":t(({item:e})=>[m(y,{class:"main-table__last-comment",text:e.last_comment?.body},null,8,["text"])]),"item.created_at":t(({item:e})=>[r(o(a(n)(e.created_at)),1)]),"item.updated_at":t(({item:e})=>[r(o(a(n)(e.updated_at)),1)]),_:1},8,["headers","modelValue","items","items-length","page","items-per-page","items-per-page-options","sort-by","loading"]))}};export{ye as default};
