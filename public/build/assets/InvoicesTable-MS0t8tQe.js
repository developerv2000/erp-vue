import{u as h,c as u,o as p,w as a,g as n,t as o,b as t,v as k,d as v,i as S,a as s,f,k as b,e as I,F as T}from"./app-Bv235s-M.js";import{u as x}from"./useQueryParams-Dab0YVoH.js";import{u as y}from"./invoices-71A20EGC.js";import{u as V}from"./useDateFormatter-cYKpR2k9.js";import{_ as F,D as P,V as $}from"./TableNavigateToPage-CCv4YDf_.js";import D from"./InvoicesTableTop-C6kmL2jV.js";import{T as w}from"./TableDefaultSkeleton-gBqwB-gP.js";import{_ as N}from"./TdEditButton-41ihSKtN.js";import{T as R}from"./TdInertiaLink-B1cB9PSQ.js";import{_ as U}from"./TogglableThreeLinesLimitedText-DTPersXd.js";import{_ as z}from"./TdRecordCommentsLink-CzX6cxvL.js";import{u as B}from"./messages-CrCj1jht.js";import{u as C}from"./global-C9k2byRd.js";import{_ as E}from"./DefaultButton-DBGLuZMW.js";import{g as M}from"./mdi-CnKAdudM.js";import"./queryHelper-LZTJtzGq.js";import"./createRecordActions-BovokYM8.js";import"./VTable-gLoNSE0h.js";import"./useAuth-CEuMeYAP.js";import"./DefaultTableToolbar-5yNsS9nc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DeleteSelectedButton-D7NimcWp.js";import"./ColumnsListItem-BTQnhMsp.js";import"./VRow-DQpkIAa1.js";import"./VSwitch-PRR1uVDR.js";import"./VNumberInput-CfdQXUlt.js";import"./FullscreenListItem-DZu5p2fy.js";import"./filter-ELhmIoIq.js";import"./InertiaLinkedButtonedIcon-B7VDdgSl.js";import"./InertiaLink-DdC26tK5.js";const O={__name:"TdImportInvoiceSentForPayment",props:{invoiceId:Number},setup(g){const l=g,{t:d}=h(),i=y(),r=C(),c=B(),m=_=>{r.loading=!0,k.post(route("import.invoices.send-for-payment",{record:_})).then(e=>{c.addSuccessMessage(),i.updateRecord(e.data)}).catch(()=>{c.addSubmitionFailedMessage()}).finally(()=>{r.loading=!1})};return(_,e)=>(p(),u(E,{size:"small","append-icon":t(M),color:"orange",onClick:e[0]||(e[0]=L=>m(l.invoiceId))},{default:a(()=>[n(o(t(d)("actions.Send")),1)]),_:1},8,["append-icon"]))}},A=["href"],q=["href"],G=["href"],ve={__name:"InvoicesTable",setup(g){const{get:l}=x(),d=v(),i=y(),{formatDate:r}=V();S(()=>{(!i.initializedFromInertiaPage||l("initialize_from_inertia_page"))&&i.initFromInertiaPage(d),i.fetchRecords({updateUrl:!0})});const c=m=>{i.fetchRecordsIfOptionsChanged(m)};return(m,_)=>(p(),u($,{class:"main-table main-table--limited-height main-table--with-filter",headers:t(d).props.tableVisibleHeaders,modelValue:t(i).selected,"onUpdate:modelValue":_[0]||(_[0]=e=>t(i).selected=e),items:t(i).records,"items-length":t(i).pagination.total_records,page:t(i).pagination.page,"items-per-page":t(i).pagination.per_page,"items-per-page-options":t(P),"sort-by":[{key:t(i).pagination.order_by,order:t(i).pagination.order_direction}],"onUpdate:options":c,loading:t(i).loading,"must-sort":"","show-select":"","show-current-page":"","fixed-header":"",hover:""},{top:a(()=>[s(D)]),loading:a(()=>[s(w)]),"footer.prepend":a(()=>[s(F,{store:t(i)},null,8,["store"])]),"item.edit":a(({item:e})=>[s(N,{link:m.route("import.invoices.edit",e.id)},null,8,["link"])]),"item.receive_date":a(({item:e})=>[n(o(t(r)(e.receive_date)),1)]),"item.sent_for_payment_date":a(({item:e})=>[e.is_sent_for_payment?(p(),f(T,{key:0},[n(o(t(r)(e.sent_for_payment_date)),1)],64)):(p(),u(O,{key:1,"invoice-id":e.id},null,8,["invoice-id"]))]),"item.accepted_by_financier_date":a(({item:e})=>[n(o(t(r)(e.accepted_by_financier_date)),1)]),"item.pdf_file":a(({item:e})=>[I("a",{class:"text-primary",href:e.pdf_file_url,target:"_blank"},o(e.pdf_file),9,A)]),"item.shipment_id":a(({item:e})=>[s(R,{link:m.route("import.shipments.index",{"id[]":e.invoiceable_id,initialize_from_inertia_page:!0})},{default:a(()=>[n(o(e.invoiceable.title),1)]),_:2},1032,["link"])]),"item.shipment_packing_list_file":a(({item:e})=>[e.invoiceable.packing_list_file?(p(),f("a",{key:0,class:"text-primary",href:e.invoiceable.packing_list_file_url,target:"_blank"},o(e.invoiceable.packing_list_file),9,q)):b("",!0)]),"item.payment_request_date_by_financier":a(({item:e})=>[n(o(t(r)(e.payment_request_date_by_financier)),1)]),"item.payment_date":a(({item:e})=>[n(o(t(r)(e.payment_date)),1)]),"item.payment_completed_date":a(({item:e})=>[n(o(t(r)(e.payment_completed_date)),1)]),"item.number":a(({item:e})=>[n(o(e.number),1)]),"item.payment_confirmation_document":a(({item:e})=>[e.payment_confirmation_document?(p(),f("a",{key:0,class:"text-primary",href:e.payment_confirmation_document_url,target:"_blank"},o(e.payment_confirmation_document),9,G)):b("",!0)]),"item.comments_count":a(({item:e})=>[s(z,{record:e},null,8,["record"])]),"item.last_comment_body":a(({item:e})=>[s(U,{class:"main-table__last-comment",text:e.last_comment?.body},null,8,["text"])]),"item.created_at":a(({item:e})=>[n(o(t(r)(e.created_at)),1)]),"item.updated_at":a(({item:e})=>[n(o(t(r)(e.updated_at)),1)]),_:1},8,["headers","modelValue","items","items-length","page","items-per-page","items-per-page-options","sort-by","loading"]))}};export{ve as default};
