import{h as M,i as z,r as v,j as B,k as F,m as b,n as I,p as j,a as O,o as P,w as o,b as l,u as e}from"./app-DAozJfJi.js";import{u as E,F as N}from"./vee-validate-D3eE-l8X.js";import{u as R}from"./useVeeFormFields-BjupO0_d.js";import{u as Z}from"./useFormData-CgBSWld4.js";import{u as T}from"./messages-DMYsu7y-.js";import{u as W}from"./useAuth-D4__BZl5.js";import{D as V}from"./DefaultSheet-Cb7a327k.js";import{_ as C}from"./DefaultTextField-D3Lo5c6q.js";import{_ as i}from"./DefaultAutocomplete-BGgEnULx.js";import{_ as G}from"./DefaultCombobox-CvoYC9yJ.js";import{_ as H}from"./DefaultFileInput-izm0aEC9.js";import{D as q}from"./DefaultSwitch-CbxQf1gm.js";import{_ as J}from"./DefaultTextarea-abcm_8NS.js";import{_ as K}from"./DefaultWysiwyg-vaAeo481.js";import{F as L}from"./FormActionsContainer-Cdv5hsQI.js";import{_ as Q}from"./FormResetButton-DpRbNtYy.js";import{_ as X,a as Y}from"./FormStoreAndReset-CGKTC4mJ.js";import{_ as h}from"./FormStoreWithoutReseting-B6E7_62l.js";import{V as _,a as u}from"./VRow-BvpG3oFW.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./WrappedLabelGroup-D-KlSZGz.js";import"./StandardLabeledGroup-DxZxJ086.js";import"./filter-DPydDAdU.js";import"./mdi-B8JOKl2S.js";import"./VSwitch-ivR2wn1Y.js";import"./DefaultButton-KwobY4u7.js";const we={__name:"ManufacturersCreateForm",setup(ee){const{t}=M(),{objectToFormData:w}=Z(),d=z(),g=T(),{isCurrentUserInArray:D}=W(),n=v(!1),p=v(!1),f=v(!1),S=B({name:I().required(),category_id:b().required(),productClasses:F().required().min(1),analyst_user_id:b().required(),bdm_user_id:b().required(),country_id:b().required(),zones:F().required().min(1)}),U={name:"",category_id:null,productClasses:[],analyst_user_id:D(d.props.analystUsers)?d.props.auth.user.id:null,bdm_user_id:null,country_id:null,zones:d.props.defaultSelectedZoneIDs??[],blacklists:[],presences:[],active:1,important:0,website:null,relationship:null,attachments:[],about:null,comment:null},{errors:m,handleSubmit:x,resetForm:k,setErrors:A,meta:c}=E({validationSchema:S,initialValues:{...U}}),{values:r}=R(Object.keys(U)),y=x($=>{n.value=!0;const s=w($);j.post(route("mad.manufacturers.store"),s).then(()=>{g.addCreatedSuccessfullyMessage(),f.value&&k(),p.value&&window.history.back()}).catch(a=>{a.response?.status===422?(A(a.response.data.errors),g.addFixErrorsMessage()):g.addSubmitionFailedMessage()}).finally(()=>{n.value=!1})});return($,s)=>(P(),O(e(N),{class:"d-flex flex-column ga-6 pb-8",enctype:"multipart/form-data"},{default:o(()=>[l(V,null,{default:o(()=>[l(_,null,{default:o(()=>[l(u,{cols:"4"},{default:o(()=>[l(C,{label:e(t)("fields.Manufacturer"),modelValue:e(r).name,"onUpdate:modelValue":s[0]||(s[0]=a=>e(r).name=a),"error-messages":e(m).name,required:""},null,8,["label","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:o(()=>[l(i,{label:e(t)("fields.Category"),items:e(d).props.categories,modelValue:e(r).category_id,"onUpdate:modelValue":s[1]||(s[1]=a=>e(r).category_id=a),"error-messages":e(m).category_id,required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:o(()=>[l(i,{label:e(t)("fields.Product class"),items:e(d).props.productClasses,modelValue:e(r).productClasses,"onUpdate:modelValue":s[2]||(s[2]=a=>e(r).productClasses=a),"error-messages":e(m).productClasses,multiple:"",required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:o(()=>[l(i,{label:e(t)("fields.Analyst"),items:e(d).props.analystUsers,modelValue:e(r).analyst_user_id,"onUpdate:modelValue":s[3]||(s[3]=a=>e(r).analyst_user_id=a),"error-messages":e(m).analyst_user_id,required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:o(()=>[l(i,{label:e(t)("fields.BDM"),items:e(d).props.bdmUsers,modelValue:e(r).bdm_user_id,"onUpdate:modelValue":s[4]||(s[4]=a=>e(r).bdm_user_id=a),"error-messages":e(m).bdm_user_id,required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:o(()=>[l(i,{label:e(t)("fields.Country"),items:e(d).props.countriesOrderedByName,modelValue:e(r).country_id,"onUpdate:modelValue":s[5]||(s[5]=a=>e(r).country_id=a),"error-messages":e(m).country_id,required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:o(()=>[l(i,{label:e(t)("fields.Zones"),items:e(d).props.zones,modelValue:e(r).zones,"onUpdate:modelValue":s[6]||(s[6]=a=>e(r).zones=a),"error-messages":e(m).zones,multiple:"",required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:o(()=>[l(i,{label:e(t)("fields.Blacklist"),items:e(d).props.blacklists,modelValue:e(r).blacklists,"onUpdate:modelValue":s[7]||(s[7]=a=>e(r).blacklists=a),"error-messages":e(m).blacklists,multiple:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:o(()=>[l(G,{label:e(t)("fields.Presence"),items:[],modelValue:e(r).presences,"onUpdate:modelValue":s[8]||(s[8]=a=>e(r).presences=a),"error-messages":e(m).presences,multiple:""},null,8,["label","modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),l(V,null,{default:o(()=>[l(_,null,{default:o(()=>[l(u,{cols:"12",class:"d-flex ga-12"},{default:o(()=>[l(q,{color:"green",label:e(t)("properties.Active"),modelValue:e(r).active,"onUpdate:modelValue":s[9]||(s[9]=a=>e(r).active=a)},null,8,["label","modelValue"]),l(q,{color:"red",label:e(t)("properties.Important"),modelValue:e(r).important,"onUpdate:modelValue":s[10]||(s[10]=a=>e(r).important=a)},null,8,["label","modelValue"])]),_:1})]),_:1})]),_:1}),l(V,null,{default:o(()=>[l(_,null,{default:o(()=>[l(u,{cols:"4"},{default:o(()=>[l(C,{label:e(t)("fields.Website"),modelValue:e(r).website,"onUpdate:modelValue":s[11]||(s[11]=a=>e(r).website=a),"error-messages":e(m).website},null,8,["label","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:o(()=>[l(C,{label:e(t)("fields.Relationship"),modelValue:e(r).relationship,"onUpdate:modelValue":s[12]||(s[12]=a=>e(r).relationship=a),"error-messages":e(m).relationship},null,8,["label","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:o(()=>[l(H,{label:e(t)("Attachments"),modelValue:e(r).attachments,"onUpdate:modelValue":s[13]||(s[13]=a=>e(r).attachments=a),"error-messages":e(m).attachments,multiple:""},null,8,["label","modelValue","error-messages"])]),_:1}),l(u,{rows:"12"},{default:o(()=>[l(J,{label:e(t)("fields.About company"),modelValue:e(r).about,"onUpdate:modelValue":s[14]||(s[14]=a=>e(r).about=a),"error-messages":e(m).about},null,8,["label","modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),l(V,null,{default:o(()=>[l(_,null,{default:o(()=>[l(u,{cols:"12"},{default:o(()=>[l(K,{modelValue:e(r).comment,"onUpdate:modelValue":s[15]||(s[15]=a=>e(r).comment=a),label:e(t)("Comment"),folder:"comments"},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),l(L,null,{default:o(()=>[l(Q,{onClick:e(k),loading:n.value},null,8,["onClick","loading"]),l(X,{onClick:s[16]||(s[16]=a=>{f.value=!0,p.value=!0,e(y)()}),loading:n.value,disabled:!e(c).valid},null,8,["loading","disabled"]),l(Y,{onClick:s[17]||(s[17]=a=>{f.value=!0,p.value=!1,e(y)()}),loading:n.value,disabled:!e(c).valid},null,8,["loading","disabled"]),l(h,{onClick:s[18]||(s[18]=a=>{f.value=!1,p.value=!1,e(y)()}),loading:n.value,disabled:!e(c).valid},null,8,["loading","disabled"])]),_:1})]),_:1}))}};export{we as default};
