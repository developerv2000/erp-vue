import{u as M,d as z,h as v,m as B,p as q,q as b,n as I,v as O,c as P,o as j,w as r,a as l,b as e}from"./app-BQRYHKht.js";import{u as E,F as N}from"./vee-validate-DrS_gLnz.js";import{u as R}from"./useVeeFormFields-Dg2HoVj1.js";import{u as Z}from"./useFormData-DEk4Ge6e.js";import{u as T}from"./messages-Cr-leA4g.js";import{u as W}from"./useAuth-CHzG6fTU.js";import{D as _}from"./DefaultSheet-BK-fqgfD.js";import{_ as C}from"./DefaultTextField-DbOR6j_7.js";import{_ as i}from"./DefaultAutocomplete-BuRqL9PL.js";import{_ as G}from"./DefaultCombobox-ClbkMcLG.js";import{_ as H}from"./DefaultFileInput-CdpxiVE6.js";import{D as F}from"./DefaultSwitch-Dj-olfBP.js";import{_ as J}from"./DefaultTextarea-Dzz9KiKa.js";import{_ as K}from"./DefaultWysiwyg-x4NvAbOl.js";import{F as L}from"./FormActionsContainer-C3ElCyZ7.js";import{_ as Q}from"./FormResetButton-BmrmXXzN.js";import{_ as X}from"./FormStoreAndRedirectBack-BVYGWQHY.js";import{_ as Y}from"./FormStoreAndReset-CRycJE4S.js";import{_ as h}from"./FormStoreWithoutReseting-B6emMwdS.js";import{V,a as u}from"./VRow-pii14n6-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./WrappedLabelGroup-BiDUtg_g.js";import"./StandardLabeledGroup-2MFCue-t.js";import"./filter-3O7ON2dG.js";import"./mdi-BZMfrfO1.js";import"./VSwitch-BnVNCvXR.js";import"./DefaultButton-_QegtWBB.js";const De={__name:"ManufacturersCreateForm",setup(ee){const{t}=M(),{objectToFormData:w}=Z(),d=z(),g=T(),{isCurrentUserInArray:D}=W(),n=v(!1),p=v(!1),f=v(!1),S=B({name:I().required(),category_id:b().required(),productClasses:q().required().min(1),analyst_user_id:b().required(),bdm_user_id:b().required(),country_id:b().required(),zones:q().required().min(1)}),U={name:"",category_id:null,productClasses:[],analyst_user_id:D(d.props.analystUsers)?d.props.auth.user.id:null,bdm_user_id:null,country_id:null,zones:d.props.defaultSelectedZoneIDs??[],blacklists:[],presences:[],active:1,important:0,website:null,relationship:null,attachments:[],about:null,comment:null},{errors:m,handleSubmit:x,resetForm:$,setErrors:A,meta:c}=E({validationSchema:S,initialValues:{...U}}),{values:o}=R(Object.keys(U)),y=x(k=>{n.value=!0;const s=w(k);O.post(route("mad.manufacturers.store"),s).then(()=>{g.addCreatedSuccessfullyMessage(),f.value&&$(),p.value&&window.history.back()}).catch(a=>{a.response?.status===422?(A(a.response.data.errors),g.addFixErrorsMessage()):g.addSubmitionFailedMessage()}).finally(()=>{n.value=!1})});return(k,s)=>(j(),P(e(N),{class:"d-flex flex-column ga-6 pb-8",enctype:"multipart/form-data"},{default:r(()=>[l(_,null,{default:r(()=>[l(V,null,{default:r(()=>[l(u,{cols:"4"},{default:r(()=>[l(C,{label:e(t)("fields.Manufacturer"),modelValue:e(o).name,"onUpdate:modelValue":s[0]||(s[0]=a=>e(o).name=a),"error-messages":e(m).name,required:""},null,8,["label","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:r(()=>[l(i,{label:e(t)("fields.Category"),items:e(d).props.categories,modelValue:e(o).category_id,"onUpdate:modelValue":s[1]||(s[1]=a=>e(o).category_id=a),"error-messages":e(m).category_id,required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:r(()=>[l(i,{label:e(t)("fields.Product class"),items:e(d).props.productClasses,modelValue:e(o).productClasses,"onUpdate:modelValue":s[2]||(s[2]=a=>e(o).productClasses=a),"error-messages":e(m).productClasses,multiple:"",required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:r(()=>[l(i,{label:e(t)("fields.Analyst"),items:e(d).props.analystUsers,modelValue:e(o).analyst_user_id,"onUpdate:modelValue":s[3]||(s[3]=a=>e(o).analyst_user_id=a),"error-messages":e(m).analyst_user_id,required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:r(()=>[l(i,{label:e(t)("fields.BDM"),items:e(d).props.bdmUsers,modelValue:e(o).bdm_user_id,"onUpdate:modelValue":s[4]||(s[4]=a=>e(o).bdm_user_id=a),"error-messages":e(m).bdm_user_id,required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:r(()=>[l(i,{label:e(t)("fields.Country"),items:e(d).props.countriesOrderedByName,modelValue:e(o).country_id,"onUpdate:modelValue":s[5]||(s[5]=a=>e(o).country_id=a),"error-messages":e(m).country_id,required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:r(()=>[l(i,{label:e(t)("fields.Zones"),items:e(d).props.zones,modelValue:e(o).zones,"onUpdate:modelValue":s[6]||(s[6]=a=>e(o).zones=a),"error-messages":e(m).zones,multiple:"",required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:r(()=>[l(i,{label:e(t)("fields.Blacklist"),items:e(d).props.blacklists,modelValue:e(o).blacklists,"onUpdate:modelValue":s[7]||(s[7]=a=>e(o).blacklists=a),"error-messages":e(m).blacklists,multiple:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:r(()=>[l(G,{label:e(t)("fields.Presence"),items:[],modelValue:e(o).presences,"onUpdate:modelValue":s[8]||(s[8]=a=>e(o).presences=a),"error-messages":e(m).presences,multiple:""},null,8,["label","modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),l(_,null,{default:r(()=>[l(V,null,{default:r(()=>[l(u,{cols:"12",class:"d-flex ga-12"},{default:r(()=>[l(F,{color:"green",label:e(t)("properties.Active"),modelValue:e(o).active,"onUpdate:modelValue":s[9]||(s[9]=a=>e(o).active=a)},null,8,["label","modelValue"]),l(F,{color:"red",label:e(t)("properties.Important"),modelValue:e(o).important,"onUpdate:modelValue":s[10]||(s[10]=a=>e(o).important=a)},null,8,["label","modelValue"])]),_:1})]),_:1})]),_:1}),l(_,null,{default:r(()=>[l(V,null,{default:r(()=>[l(u,{cols:"4"},{default:r(()=>[l(C,{label:e(t)("fields.Website"),modelValue:e(o).website,"onUpdate:modelValue":s[11]||(s[11]=a=>e(o).website=a),"error-messages":e(m).website},null,8,["label","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:r(()=>[l(C,{label:e(t)("fields.Relationship"),modelValue:e(o).relationship,"onUpdate:modelValue":s[12]||(s[12]=a=>e(o).relationship=a),"error-messages":e(m).relationship},null,8,["label","modelValue","error-messages"])]),_:1}),l(u,{cols:"4"},{default:r(()=>[l(H,{label:e(t)("Attachments"),modelValue:e(o).attachments,"onUpdate:modelValue":s[13]||(s[13]=a=>e(o).attachments=a),"error-messages":e(m).attachments,multiple:""},null,8,["label","modelValue","error-messages"])]),_:1}),l(u,{rows:"12"},{default:r(()=>[l(J,{label:e(t)("fields.About company"),modelValue:e(o).about,"onUpdate:modelValue":s[14]||(s[14]=a=>e(o).about=a),"error-messages":e(m).about},null,8,["label","modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),l(_,null,{default:r(()=>[l(V,null,{default:r(()=>[l(u,{cols:"12"},{default:r(()=>[l(K,{modelValue:e(o).comment,"onUpdate:modelValue":s[15]||(s[15]=a=>e(o).comment=a),label:e(t)("Comment"),folder:"comments"},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),l(L,null,{default:r(()=>[l(Q,{onClick:e($),loading:n.value},null,8,["onClick","loading"]),l(h,{onClick:s[16]||(s[16]=a=>{f.value=!1,p.value=!1,e(y)()}),loading:n.value,disabled:!e(c).valid},null,8,["loading","disabled"]),l(Y,{onClick:s[17]||(s[17]=a=>{f.value=!0,p.value=!1,e(y)()}),loading:n.value,disabled:!e(c).valid},null,8,["loading","disabled"]),l(X,{onClick:s[18]||(s[18]=a=>{f.value=!0,p.value=!0,e(y)()}),loading:n.value,disabled:!e(c).valid},null,8,["loading","disabled"])]),_:1})]),_:1}))}};export{De as default};
