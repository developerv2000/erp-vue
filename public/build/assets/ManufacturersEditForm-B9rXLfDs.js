import{u as j,d as E,l as y,h as $,m as P,p as F,q as b,n as O,j as L,c as w,o as x,w as r,a as l,b as e,k as T}from"./app-DyA9sgKY.js";import{u as W,F as Z}from"./vee-validate-Bwx8WcZ2.js";import{u as G}from"./useVeeFormFields-CLtRhEno.js";import{u as H}from"./useFormData-CgBSWld4.js";import{u as J}from"./messages-my872IFV.js";import{D as c}from"./DefaultSheet-C1Z8wXKz.js";import{_ as U}from"./DefaultTextField-D9T5h45H.js";import{_ as p}from"./DefaultAutocomplete-BnVwagyK.js";import{_ as K}from"./DefaultCombobox-BWTVcprN.js";import{_ as Q}from"./DefaultFileInput-Dg905_Nq.js";import{D}from"./DefaultSwitch-CjOfJNQ7.js";import{_ as X}from"./DefaultTextarea-ukZcFvdE.js";import{_ as S}from"./DefaultWysiwyg-DB72ed6f.js";import{F as Y}from"./FormActionsContainer-D452MqZf.js";import{_ as h}from"./FormResetButton-56Ubbj6i.js";import{_ as ee,a as le}from"./FormUpdateWithourRedirect-Bttuw3fh.js";import{V as _,a as m}from"./VRow-Ce0Jzgqy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./WrappedLabelGroup-BnuCeFZD.js";import"./StandardLabeledGroup-TH58wf6w.js";import"./filter-CKu96PVV.js";import"./mdi-DZCuF3m0.js";import"./VSwitch-DOrbTqHP.js";import"./DefaultButton-CEWfauLh.js";const we={__name:"ManufacturersEditForm",setup(ae){const{t:u}=j(),{objectToFormData:z}=H(),n=E(),V=J(),t=y(()=>n.props.record),f=$(!1),g=$(!1),M=P({name:O().required(),category_id:b().required(),productClasses:F().required().min(1),analyst_user_id:b().required(),bdm_user_id:b().required(),country_id:b().required(),zones:F().required().min(1)}),A=y(()=>({name:t.value.name,category_id:t.value.category_id,productClasses:t.value.product_classes.map(i=>i.id),analyst_user_id:t.value.analyst_user_id,bdm_user_id:t.value.bdm_user_id,country_id:t.value.country_id,zones:t.value.zones.map(i=>i.id),blacklists:t.value.blacklists.map(i=>i.id),presences:t.value.presences.map(i=>i.name),active:t.value.active,important:t.value.important,website:t.value.website,relationship:t.value.relationship,about:t.value.about})),B={attachments:[],comment:null},v=y(()=>({...A.value,...B})),{handleSubmit:R,errors:d,setErrors:I,resetForm:k,meta:q}=W({validationSchema:M,initialValues:v.value}),{values:o}=G(Object.keys(v.value)),C=R(i=>{const a=z(i);f.value=!0,axios.post(route("mad.manufacturers.update",{record:t.value.id}),a).then(()=>{V.addUpdatedSuccessfullyMessage(),g.value?window.history.back():N()}).catch(s=>{s.response?.status===422?(I(s.response.data.errors),V.addFixErrorsMessage()):V.addSubmitionFailedMessage()}).finally(()=>{f.value=!1})}),N=()=>{L.reload({only:["record","breadcrumbs"],onSuccess:()=>{k({values:v.value})}})};return(i,a)=>(x(),w(e(Z),{class:"d-flex flex-column ga-6 pb-8",enctype:"multipart/form-data"},{default:r(()=>[l(c,null,{default:r(()=>[l(_,null,{default:r(()=>[l(m,{cols:"4"},{default:r(()=>[l(U,{label:e(u)("fields.Manufacturer"),modelValue:e(o).name,"onUpdate:modelValue":a[0]||(a[0]=s=>e(o).name=s),"error-messages":e(d).name,required:""},null,8,["label","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(p,{label:e(u)("fields.Category"),items:e(n).props.categories,modelValue:e(o).category_id,"onUpdate:modelValue":a[1]||(a[1]=s=>e(o).category_id=s),"error-messages":e(d).category_id,required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(p,{label:e(u)("fields.Product class"),items:e(n).props.productClasses,modelValue:e(o).productClasses,"onUpdate:modelValue":a[2]||(a[2]=s=>e(o).productClasses=s),"error-messages":e(d).productClasses,multiple:"",required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(p,{label:e(u)("fields.Analyst"),items:e(n).props.analystUsers,modelValue:e(o).analyst_user_id,"onUpdate:modelValue":a[3]||(a[3]=s=>e(o).analyst_user_id=s),"error-messages":e(d).analyst_user_id,required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(p,{label:e(u)("fields.BDM"),items:e(n).props.bdmUsers,modelValue:e(o).bdm_user_id,"onUpdate:modelValue":a[4]||(a[4]=s=>e(o).bdm_user_id=s),"error-messages":e(d).bdm_user_id,required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(p,{label:e(u)("fields.Country"),items:e(n).props.countriesOrderedByName,modelValue:e(o).country_id,"onUpdate:modelValue":a[5]||(a[5]=s=>e(o).country_id=s),"error-messages":e(d).country_id,required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(p,{label:e(u)("fields.Zones"),items:e(n).props.zones,modelValue:e(o).zones,"onUpdate:modelValue":a[6]||(a[6]=s=>e(o).zones=s),"error-messages":e(d).zones,multiple:"",required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(p,{label:e(u)("fields.Blacklist"),items:e(n).props.blacklists,modelValue:e(o).blacklists,"onUpdate:modelValue":a[7]||(a[7]=s=>e(o).blacklists=s),"error-messages":e(d).blacklists,multiple:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(K,{label:e(u)("fields.Presence"),items:[],modelValue:e(o).presences,"onUpdate:modelValue":a[8]||(a[8]=s=>e(o).presences=s),"error-messages":e(d).presences,multiple:""},null,8,["label","modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),l(c,null,{default:r(()=>[l(_,null,{default:r(()=>[l(m,{cols:"12",class:"d-flex ga-12"},{default:r(()=>[l(D,{label:e(u)("properties.Active"),modelValue:e(o).active,"onUpdate:modelValue":a[9]||(a[9]=s=>e(o).active=s),color:"green"},null,8,["label","modelValue"]),l(D,{label:e(u)("properties.Important"),modelValue:e(o).important,"onUpdate:modelValue":a[10]||(a[10]=s=>e(o).important=s),color:"red"},null,8,["label","modelValue"])]),_:1})]),_:1})]),_:1}),l(c,null,{default:r(()=>[l(_,null,{default:r(()=>[l(m,{cols:"4"},{default:r(()=>[l(U,{label:e(u)("fields.Website"),modelValue:e(o).website,"onUpdate:modelValue":a[11]||(a[11]=s=>e(o).website=s),"error-messages":e(d).website},null,8,["label","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(U,{label:e(u)("fields.Relationship"),modelValue:e(o).relationship,"onUpdate:modelValue":a[12]||(a[12]=s=>e(o).relationship=s),"error-messages":e(d).relationship},null,8,["label","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(Q,{label:e(u)("Attachments"),modelValue:e(o).attachments,"onUpdate:modelValue":a[13]||(a[13]=s=>e(o).attachments=s),"error-messages":e(d).attachments,multiple:""},null,8,["label","modelValue","error-messages"])]),_:1}),l(m,{rows:"12"},{default:r(()=>[l(X,{label:e(u)("fields.About company"),modelValue:e(o).about,"onUpdate:modelValue":a[14]||(a[14]=s=>e(o).about=s),"error-messages":e(d).about},null,8,["label","modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),l(c,null,{default:r(()=>[l(_,null,{default:r(()=>[l(m,null,{default:r(()=>[l(S,{modelValue:e(o).comment,"onUpdate:modelValue":a[15]||(a[15]=s=>e(o).comment=s),label:e(u)("comments.New"),"error-messages":e(d).comment,folder:"comments"},null,8,["modelValue","label","error-messages"])]),_:1}),t.value.last_comment?(x(),w(m,{key:0},{default:r(()=>[l(S,{modelValue:t.value.last_comment.body,"onUpdate:modelValue":a[16]||(a[16]=s=>t.value.last_comment.body=s),label:e(u)("comments.Last"),disabled:""},null,8,["modelValue","label"])]),_:1})):T("",!0)]),_:1})]),_:1}),l(Y,null,{default:r(()=>[l(h,{onClick:e(k),loading:f.value},null,8,["onClick","loading"]),l(ee,{onClick:a[17]||(a[17]=s=>{g.value=!0,e(C)()}),loading:f.value,disabled:!e(q).valid},null,8,["loading","disabled"]),l(le,{onClick:a[18]||(a[18]=s=>{g.value=!1,e(C)()}),loading:f.value,disabled:!e(q).valid},null,8,["loading","disabled"])]),_:1})]),_:1}))}};export{we as default};
