import{u as x,c as g,o as _,w as t,g as a,t as o,b as r,v as S,d as I,i as V,a as n,f as u,k as p,F as b,az as v}from"./app-CMSjNDK4.js";import{u as M}from"./useQueryParams-DSJ1dPLe.js";import{u as k}from"./orderProducts-DC-O0jdK.js";import{u as z}from"./useDateFormatter-DsH7D03H.js";import{_ as C,D,V as O}from"./TableNavigateToPage-DZtY5LO0.js";import E from"./OrderProductsTableTop-DAOjZWDP.js";import{T as N}from"./TableDefaultSkeleton-DT6c-9fp.js";import{_ as R}from"./TdEditButton-XbcLimv4.js";import{T as U}from"./TdInertiaLink-B9gRn9a5.js";import{_ as y}from"./TogglableThreeLinesLimitedText-ABbZkxse.js";import{_ as A}from"./TdRecordCommentsLink-B7BO6V-0.js";import{_ as B}from"./TdOrderStatus-BxD4CIMK.js";import{u as T}from"./messages-eCh_LZOb.js";import{u as P}from"./global-DzKODoZg.js";import{_ as $}from"./DefaultButton-CFfFCqKo.js";import{V as w}from"./mdi-BZMfrfO1.js";import{_ as G}from"./TdOrderProductLayoutStatus-DaMB06Zt.js";import"./queryHelper-LZTJtzGq.js";import"./createRecordActions-BovokYM8.js";import"./VTable-C3mZiDDs.js";import"./DefaultTableToolbar-ChjBEH8E.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ColumnsListItem-yqIXi0oD.js";import"./VRow-Dvbb8rke.js";import"./VSwitch-apHMLF3B.js";import"./VNumberInput-BfmNjXd2.js";import"./FullscreenListItem-D0C4kfGX.js";import"./filter-gwBCF0wV.js";import"./InertiaLinkedButtonedIcon-YSpz34KH.js";import"./InertiaLink-B9Riv5UN.js";import"./useAuth-DUKBtqsc.js";const L={__name:"TdOrderProductEndProduction",props:{orderId:Number},setup(h){const f=h,{t:l}=x(),s=k(),i=P(),c=T(),d=m=>{i.loading=!0,S.post(route("cmd.order-products.end-production",{record:m})).then(e=>{c.addSuccessMessage(),s.updateRecord(e.data)}).catch(()=>{c.addSubmitionFailedMessage()}).finally(()=>{i.loading=!1})};return(m,e)=>(_(),g($,{size:"small","append-icon":r(w),color:"purple",onClick:e[0]||(e[0]=F=>d(f.orderId))},{default:t(()=>[a(o(r(l)("actions.End")),1)]),_:1},8,["append-icon"]))}},H={__name:"TdOrderProductSetAsReadyForShipmentFromManufacturer",props:{orderId:Number},setup(h){const f=h,{t:l}=x(),s=k(),i=P(),c=T(),d=m=>{i.loading=!0,S.post(route("cmd.order-products.set-as-ready-for-shipment-from-manufacturer",{record:m})).then(e=>{c.addSuccessMessage(),s.updateRecord(e.data)}).catch(()=>{c.addSubmitionFailedMessage()}).finally(()=>{i.loading=!1})};return(m,e)=>(_(),g($,{size:"small","append-icon":r(w),color:"pink",onClick:e[0]||(e[0]=F=>d(f.orderId))},{default:t(()=>[a(o(r(l)("actions.Mark")),1)]),_:1},8,["append-icon"]))}},Q=["href"],j=["href"],q=["href"],J=["href"],we={__name:"OrderProductsTable",setup(h){const{get:f}=M(),l=I(),s=k(),{formatDate:i}=z();V(()=>{(!s.initializedFromInertiaPage||f("initialize_from_inertia_page"))&&s.initFromInertiaPage(l),s.fetchRecords({updateUrl:!0})});const c=d=>{s.fetchRecordsIfOptionsChanged(d)};return(d,m)=>(_(),g(O,{class:"main-table main-table--limited-height main-table--with-filter",headers:r(l).props.tableVisibleHeaders,modelValue:r(s).selected,"onUpdate:modelValue":m[0]||(m[0]=e=>r(s).selected=e),items:r(s).records,"items-length":r(s).pagination.total_records,page:r(s).pagination.page,"items-per-page":r(s).pagination.per_page,"items-per-page-options":r(D),"sort-by":[{key:r(s).pagination.order_by,order:r(s).pagination.order_direction}],"onUpdate:options":c,loading:r(s).loading,"must-sort":"","show-select":"","show-current-page":"","fixed-header":"",hover:""},{top:t(()=>[n(E)]),loading:t(()=>[n(N)]),"footer.prepend":t(()=>[n(C,{store:r(s)},null,8,["store"])]),"item.edit":t(({item:e})=>[n(R,{link:d.route("cmd.order-products.edit",e.id)},null,8,["link"])]),"item.id":t(({item:e})=>[a(o(e.id),1)]),"item.order_manufacturer_id":t(({item:e})=>[a(o(e.order.manufacturer.name),1)]),"item.order_country_id":t(({item:e})=>[a(o(e.order.country.code),1)]),"item.order_id":t(({item:e})=>[n(U,{link:d.route("cmd.orders.index",{"id[]":e.order.id,initialize_from_inertia_page:!0})},{default:t(()=>[a(o(e.order.title),1)]),_:2},1032,["link"])]),"item.process_trademark_en":t(({item:e})=>[n(y,{text:e.process.full_english_product_label},null,8,["text"])]),"item.process_trademark_ru":t(({item:e})=>[n(y,{text:e.process.full_russian_product_label},null,8,["text"])]),"item.process_marketing_authorization_holder_id":t(({item:e})=>[a(o(e.process.mah.name),1)]),"item.status":t(({item:e})=>[n(B,{status:e.status},null,8,["status"])]),"item.order_currency_id":t(({item:e})=>[a(o(e.order.currency?.name),1)]),"item.total_price":t(({item:e})=>[a(o(e.total_price),1)]),"item.comments_count":t(({item:e})=>[n(A,{record:e},null,8,["record"])]),"item.last_comment_body":t(({item:e})=>[n(y,{class:"main-table__last-comment",text:e.last_comment?.body},null,8,["text"])]),"item.order_sent_to_bdm_date":t(({item:e})=>[a(o(r(i)(e.order.sent_to_bdm_date)),1)]),"item.order_name":t(({item:e})=>[a(o(e.order.name),1)]),"item.order_purchase_date":t(({item:e})=>[a(o(r(i)(e.order.purchase_date)),1)]),"item.order_sent_to_confirmation_date":t(({item:e})=>[a(o(r(i)(e.order.sent_to_confirmation_date)),1)]),"item.order_confirmation_date":t(({item:e})=>[a(o(r(i)(e.order.confirmation_date)),1)]),"item.order_sent_to_manufacturer_date":t(({item:e})=>[a(o(r(i)(e.order.sent_to_manufacturer_date)),1)]),"item.order_production_start_date":t(({item:e})=>[a(o(r(i)(e.order.production_start_date)),1)]),"item.production_status":t(({item:e})=>[n(y,{class:v({"text-green-darken-2":e.is_ready_for_shipment_from_manufacturer}),text:e.production_status},null,8,["class","text"])]),"item.production_end_date":t(({item:e})=>[e.production_is_ended?(_(),u(b,{key:0},[a(o(r(i)(e.production_end_date)),1)],64)):e.production_is_started?(_(),g(L,{key:1,"order-id":e.id},null,8,["order-id"])):p("",!0)]),"item.packing_list_file":t(({item:e})=>[e.packing_list_file?(_(),u("a",{key:0,class:"text-primary",href:e.packing_list_file_url,target:"_blank"},o(e.packing_list_file),9,Q)):p("",!0)]),"item.coa_file":t(({item:e})=>[e.coa_file?(_(),u("a",{key:0,class:"text-primary",href:e.coa_file_url,target:"_blank"},o(e.coa_file),9,j)):p("",!0)]),"item.coo_file":t(({item:e})=>[e.coo_file?(_(),u("a",{key:0,class:"text-primary",href:e.coo_file_url,target:"_blank"},o(e.coo_file),9,q)):p("",!0)]),"item.declaration_for_europe_file":t(({item:e})=>[e.declaration_for_europe_file?(_(),u("a",{key:0,class:"text-primary",href:e.declaration_for_europe_file_url,target:"_blank"},o(e.declaration_for_europe_file),9,J)):p("",!0)]),"item.readiness_for_shipment_from_manufacturer_date":t(({item:e})=>[e.is_ready_for_shipment_from_manufacturer?(_(),u(b,{key:0},[a(o(r(i)(e.readiness_for_shipment_from_manufacturer_date)),1)],64)):e.can_be_set_as_ready_for_shipment_from_manufacturer?(_(),g(H,{key:1,"order-id":e.id},null,8,["order-id"])):p("",!0)]),"item.new_layout":t(({item:e})=>[n(G,{"new-layout":e.new_layout},null,8,["new-layout"])]),"item.date_of_sending_new_layout_to_manufacturer":t(({item:e})=>[a(o(r(i)(e.date_of_sending_new_layout_to_manufacturer)),1)]),"item.date_of_receiving_print_proof_from_manufacturer":t(({item:e})=>[a(o(r(i)(e.date_of_receiving_print_proof_from_manufacturer)),1)]),"item.layout_approved_date":t(({item:e})=>[a(o(r(i)(e.layout_approved_date)),1)]),"item.created_at":t(({item:e})=>[a(o(r(i)(e.created_at)),1)]),"item.updated_at":t(({item:e})=>[a(o(r(i)(e.updated_at)),1)]),_:1},8,["headers","modelValue","items","items-length","page","items-per-page","items-per-page-options","sort-by","loading"]))}};export{we as default};
