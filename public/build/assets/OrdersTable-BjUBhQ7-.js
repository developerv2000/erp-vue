import{u as b,c as f,o as p,w as r,g as d,t as a,b as t,v as T,d as I,i as P,f as k,k as C,F as S,e as y,a as m}from"./app-7F7n231s.js";import{u as D}from"./useQueryParams-By3b4qRt.js";import{u as h}from"./orders-BhcHHJwh.js";import{u as F}from"./useDateFormatter-aJ6VLTy8.js";import{_ as O,D as v,V as w}from"./TableNavigateToPage-JUjryIyR.js";import N from"./OrdersTableTop-Cr4HR7aG.js";import{T as M}from"./TableDefaultSkeleton-BaeU0W2c.js";import{_ as R}from"./TdEditButton-Dprr0zMl.js";import{_ as z}from"./TdAva-B0k76zVo.js";import{T as B}from"./TdInertiaLink-BPZmPvGT.js";import{_ as U}from"./TogglableThreeLinesLimitedText-DyPGs0gT.js";import{_ as E}from"./TdRecordCommentsLink-C9WYyDNz.js";import{_ as A}from"./TdOrderStatus-6e7meRXu.js";import{u as $}from"./messages-BpNGX81Q.js";import{u as x}from"./global-CYw4cvbg.js";import{_ as V}from"./DefaultButton-CwMkA5bK.js";import{g as L,V as G}from"./mdi-BZMfrfO1.js";import"./queryHelper-LZTJtzGq.js";import"./createRecordActions-BovokYM8.js";import"./VTable-U-Sj7N5B.js";import"./useAuth-DFZ3-HmZ.js";import"./DefaultTableToolbar-B9obmYFS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NewRecordButton-3sXsmVhF.js";import"./InertiaLinkedButton-CeFIEIeD.js";import"./DeleteSelectedButton-CdgdXmUZ.js";import"./ColumnsListItem-BX6KA4xS.js";import"./VRow-CyQ_eN64.js";import"./VSwitch-DlGrUDDt.js";import"./VNumberInput-C9eUyK9o.js";import"./FullscreenListItem-DSVypZo6.js";import"./filter-P6R30PoH.js";import"./InertiaLinkedButtonedIcon-CLMZoIa6.js";import"./InertiaLink-DCnIw60K.js";const H={__name:"TdOrderSentToBdm",props:{orderId:Number},setup(g){const l=g,{t:_}=b(),c=h(),o=x(),i=$(),u=n=>{o.loading=!0,T.post(route("pld.orders.sent-to-bdm",{record:n})).then(s=>{i.addSuccessMessage(),c.updateRecord(s.data)}).catch(()=>{i.addSubmitionFailedMessage()}).finally(()=>{o.loading=!1})};return(n,s)=>(p(),f(V,{size:"small","append-icon":t(L),color:"amber",onClick:s[0]||(s[0]=e=>u(l.orderId))},{default:r(()=>[d(a(t(_)("actions.Send")),1)]),_:1},8,["append-icon"]))}},Q={__name:"TdOrderConfirm",props:{orderId:Number},setup(g){const l=g,{t:_}=b(),c=h(),o=x(),i=$(),u=n=>{o.loading=!0,T.post(route("pld.orders.confirm",{record:n})).then(s=>{i.addSuccessMessage(),c.updateRecord(s.data)}).catch(()=>{i.addSubmitionFailedMessage()}).finally(()=>{o.loading=!1})};return(n,s)=>(p(),f(V,{size:"small","append-icon":t(G),color:"green",onClick:s[0]||(s[0]=e=>u(l.orderId))},{default:r(()=>[d(a(t(_)("actions.Confirm")),1)]),_:1},8,["append-icon"]))}},j={class:"text-lowercase"},q=["href"],Ce={__name:"OrdersTable",setup(g){const{t:l}=b(),{get:_}=D(),c=I(),o=h(),{formatDate:i}=F();P(()=>{(!o.initializedFromInertiaPage||_("initialize_from_inertia_page"))&&o.initFromInertiaPage(c),o.fetchRecords({updateUrl:!0})});const u=n=>{o.fetchRecordsIfOptionsChanged(n)};return(n,s)=>(p(),f(w,{class:"main-table main-table--limited-height main-table--with-filter",headers:t(c).props.tableVisibleHeaders,modelValue:t(o).selected,"onUpdate:modelValue":s[0]||(s[0]=e=>t(o).selected=e),items:t(o).records,"items-length":t(o).pagination.total_records,page:t(o).pagination.page,"items-per-page":t(o).pagination.per_page,"items-per-page-options":t(v),"sort-by":[{key:t(o).pagination.order_by,order:t(o).pagination.order_direction}],"onUpdate:options":u,loading:t(o).loading,"must-sort":"","show-select":"","show-current-page":"","fixed-header":"",hover:""},{top:r(()=>[m(N)]),loading:r(()=>[m(M)]),"footer.prepend":r(()=>[m(O,{store:t(o)},null,8,["store"])]),"item.edit":r(({item:e})=>[m(R,{link:n.route("pld.orders.edit",e.id)},null,8,["link"])]),"item.manufacturer_bdm":r(({item:e})=>[m(z,{user:e.manufacturer.bdm},null,8,["user"])]),"item.receive_date":r(({item:e})=>[d(a(t(i)(e.receive_date)),1)]),"item.manufacturer_id":r(({item:e})=>[d(a(e.manufacturer.name),1)]),"item.country_id":r(({item:e})=>[d(a(e.country.code),1)]),"item.products_count":r(({item:e})=>[m(B,{link:n.route("pld.order-products.index",{"order_id[]":e.id,initialize_from_inertia_page:!0})},{default:r(()=>[y("span",j,a(e.products_count)+" "+a(t(l)("Products")),1)]),_:2},1032,["link"])]),"item.comments_count":r(({item:e})=>[m(E,{record:e},null,8,["record"])]),"item.last_comment_body":r(({item:e})=>[m(U,{class:"main-table__last-comment",text:e.last_comment?.body},null,8,["text"])]),"item.status":r(({item:e})=>[m(A,{status:e.status},null,8,["status"])]),"item.sent_to_bdm_date":r(({item:e})=>[e.is_sent_to_bdm?(p(),k(S,{key:0},[d(a(t(i)(e.sent_to_bdm_date)),1)],64)):(p(),f(H,{key:1,"order-id":e.id},null,8,["order-id"]))]),"item.name":r(({item:e})=>[d(a(e.name),1)]),"item.pdf_file":r(({item:e})=>[y("a",{class:"text-primary",href:e.pdf_file_url,target:"_blank"},a(e.pdf_file),9,q)]),"item.purchase_date":r(({item:e})=>[d(a(t(i)(e.purchase_date)),1)]),"item.confirmation_date":r(({item:e})=>[e.is_confirmed?(p(),k(S,{key:0},[d(a(t(i)(e.confirmation_date)),1)],64)):e.is_sent_to_confirmation?(p(),f(Q,{key:1,"order-id":e.id},null,8,["order-id"])):C("",!0)]),"item.sent_to_manufacturer_date":r(({item:e})=>[d(a(t(i)(e.sent_to_manufacturer_date)),1)]),_:1},8,["headers","modelValue","items","items-length","page","items-per-page","items-per-page-options","sort-by","loading"]))}};export{Ce as default};
