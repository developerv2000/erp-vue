import{c as _,o as f,w as e,g as n,t as o,aN as b,u as h,d as x,i as T,b as a,a as s,e as y}from"./app-BLgoNwh9.js";import{u as P}from"./useQueryParams-DDDdTybf.js";import{u as S}from"./orders-BHChWGP6.js";import{u as k}from"./useDateFormatter-DW7w93RU.js";import{_ as D,D as V,V as w}from"./TableNavigateToPage-BF9zRBEk.js";import O from"./OrdersTableTop-C-UpjvDV.js";import{T as $}from"./TableDefaultSkeleton-Dg0bwIG3.js";import{_ as I}from"./TdEditButton-BtitC7Ay.js";import{_ as C,a as N}from"./TogglableThreeLinesLimitedText-C0esRJuu.js";import{T as U}from"./TdInertiaLink-B66W5Sot.js";import{_ as v}from"./TdRecordCommentsLink-DN54Q0sd.js";import{T as B}from"./TdMediumWeightText-BqKl-NXH.js";import"./queryHelper-C2x2SXyh.js";import"./VTable-C7nmxiMy.js";import"./useAuth-DdAYRigt.js";import"./DefaultTableToolbar-BmKHFmfD.js";import"./DefaultButton-As932Yet.js";import"./mdi-FFd_BlEo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NewRecordButton-BQElJTQ5.js";import"./DeleteSelectedButton-CjQzwmLd.js";import"./messages-Daw9qpnw.js";import"./ColumnsListItem-oruNqJZa.js";import"./VRow-CyYZUeep.js";import"./VSwitch-y5heEXKx.js";import"./VNumberInput-C_RYYyP0.js";import"./FullscreenListItem-Dog8D9S_.js";import"./filter-p85kxTXY.js";import"./InertiaLinkedButtonedIcon-CPtNgviF.js";import"./InertiaLink-BbqYSPzp.js";const F={__name:"TdOrderStatus",props:{status:String},setup(i){return(u,c)=>(f(),_(B,{class:b({"text-grey":i.status=="Created","text-yellow":i.status=="Sent to BDM","text-orange":i.status=="Sent to confirmation","text-green":i.status=="Confirmed","text-blue":i.status=="Sent to manufacturer","text-indigo":i.status=="Production started","text-deep-purple":i.status=="Production is finished","text-red":i.status=="Ready for shipment from manufacturer"})},{default:e(()=>[n(o(i.status),1)]),_:1},8,["class"]))}},R={class:"text-lowercase"},_t={__name:"OrdersTable",setup(i){const{t:u}=h(),{get:c}=P(),l=x(),r=S(),{formatDate:m}=k();T(()=>{(!r.initializedFromInertiaPage||c("initialize_from_inertia_page"))&&r.initFromInertiaPage(l),r.fetchRecords({updateUrl:!0})});function g(d){r.fetchRecordsIfOptionsChanged(d)}return(d,p)=>(f(),_(w,{class:"main-table main-table--limited-height main-table--with-filter",headers:a(l).props.tableVisibleHeaders,modelValue:a(r).selected,"onUpdate:modelValue":p[0]||(p[0]=t=>a(r).selected=t),items:a(r).records,"items-length":a(r).pagination.total_records,page:a(r).pagination.page,"items-per-page":a(r).pagination.per_page,"items-per-page-options":a(V),"sort-by":[{key:a(r).pagination.order_by,order:a(r).pagination.order_direction}],"onUpdate:options":g,loading:a(r).loading,"must-sort":"","show-select":"","show-current-page":"","fixed-header":"",hover:""},{top:e(()=>[s(O)]),loading:e(()=>[s($)]),"footer.prepend":e(()=>[s(D,{store:a(r)},null,8,["store"])]),"item.edit":e(({item:t})=>[s(I,{link:d.route("pld.orders.edit",t.id)},null,8,["link"])]),"item.manufacturer_bdm":e(({item:t})=>[s(N,{user:t.manufacturer.bdm},null,8,["user"])]),"item.receive_date":e(({item:t})=>[n(o(a(m)(t.receive_date)),1)]),"item.manufacturer_id":e(({item:t})=>[n(o(t.manufacturer.name),1)]),"item.country_id":e(({item:t})=>[n(o(t.country.code),1)]),"item.products_count":e(({item:t})=>[s(U,{link:d.route("pld.order-products.index",{"order_id[]":t.id})},{default:e(()=>[y("span",R,o(t.products_count)+" "+o(a(u)("Products")),1)]),_:2},1032,["link"])]),"item.comments_count":e(({item:t})=>[s(v,{record:t},null,8,["record"])]),"item.last_comment_body":e(({item:t})=>[s(C,{class:"main-table__last-comment",text:t.last_comment?.body},null,8,["text"])]),"item.status":e(({item:t})=>[s(F,{status:t.status},null,8,["status"])]),"item.name":e(({item:t})=>[n(o(t.name),1)]),"item.sent_to_bdm_date":e(({item:t})=>[n(o(a(m)(t.sent_to_bdm_date)),1)]),"item.purchase_date":e(({item:t})=>[n(o(a(m)(t.purchase_date)),1)]),"item.confirmation_date":e(({item:t})=>[n(o(a(m)(t.confirmation_date)),1)]),"item.sent_to_manufacturer_date":e(({item:t})=>[n(o(a(m)(t.sent_to_manufacturer_date)),1)]),_:1},8,["headers","modelValue","items","items-length","page","items-per-page","items-per-page-options","sort-by","loading"]))}};export{_t as default};
