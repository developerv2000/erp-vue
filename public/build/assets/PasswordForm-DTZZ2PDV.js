import{u as E,h as m,v as M,x as w,j as q,c as N,o as D,w as r,a,g as I,t as U,b as e,C as _}from"./app-CGP4rxJE.js";import{u as h,a as v,F as B}from"./vee-validate-D5VtrSr7.js";import{u as R}from"./messages-DcN_lpLJ.js";import{D as j}from"./DefaultSheet-Ci6LlMOc.js";import{_ as A}from"./DefaultTitle-DvYGaA2o.js";import{_ as g}from"./DefaultTextField-B-EuZCRI.js";import{F as O}from"./FormActionsContainer-BCAfWwIO.js";import{_ as T}from"./FormUpdateButton-BTvHNMjV.js";import{_ as z}from"./FormResetButton-lKyN_xjj.js";import{m as C,a as V}from"./mdi-BINEaKNx.js";import{V as G,a as F}from"./VRow-E2o2U0ol.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./WrappedLabelGroup-B8Kd4-oq.js";import"./DefaultButton-C2shneeD.js";const ne={__name:"PasswordForm",setup(H){const{t:u}=E(),p=R(),l=m(!1),n=m(!1),t=m(!1),b=M({current_password:w().required().min(4),new_password:w().required().min(4)}),{handleSubmit:y,setErrors:S,resetForm:f,meta:k}=h({validationSchema:b}),{value:d,errorMessage:x}=v("current_password"),{value:i,errorMessage:P}=v("new_password"),$=y(c=>{q.post(route("profile.update-password"),c,{only:[],preserveScroll:!0,onStart:()=>{l.value=!0},onError:s=>{S(s),p.addFixErrorsMessage()},onSuccess:()=>{f(),p.addUpdatedSuccessfullyMessage()},onFinish:()=>{l.value=!1}})});return(c,s)=>(D(),N(e(B),null,{default:r(()=>[a(j,{class:"mt-8"},{default:r(()=>[a(A,null,{default:r(()=>[I(U(e(u)("forms.Password update")),1)]),_:1}),a(G,null,{default:r(()=>[a(F,null,{default:r(()=>[a(g,{label:e(u)("fields.Current password"),type:n.value?"text":"password",modelValue:e(d),"onUpdate:modelValue":s[0]||(s[0]=o=>_(d)?d.value=o:null),"error-messages":e(x),autocomplete:"current-password","append-inner-icon":n.value?e(C):e(V),"onClick:appendInner":s[1]||(s[1]=o=>n.value=!n.value),required:""},null,8,["label","type","modelValue","error-messages","append-inner-icon"])]),_:1}),a(F,null,{default:r(()=>[a(g,{label:e(u)("fields.New password"),type:t.value?"text":"password",modelValue:e(i),"onUpdate:modelValue":s[2]||(s[2]=o=>_(i)?i.value=o:null),"error-messages":e(P),autocomplete:"new-password","append-inner-icon":t.value?e(C):e(V),"onClick:appendInner":s[3]||(s[3]=o=>t.value=!t.value),required:""},null,8,["label","type","modelValue","error-messages","append-inner-icon"])]),_:1})]),_:1})]),_:1}),a(O,{class:"mt-5"},{default:r(()=>[a(z,{onClick:e(f),loading:l.value},null,8,["onClick","loading"]),a(T,{onClick:e($),loading:l.value,disabled:!e(k).valid},null,8,["onClick","loading","disabled"])]),_:1})]),_:1}))}};export{ne as default};
