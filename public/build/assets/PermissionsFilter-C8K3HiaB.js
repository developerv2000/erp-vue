import{u as g,d as v,h as p,i as _,c as F,o as V,w as n,a as r,b as t,j as c}from"./app-Clvn7mZt.js";import{u as y}from"./messages-NMh0QN-V.js";import{n as S,a as M}from"./queryHelper-zuYrvkeK.js";import{F as m,_ as D,a as k,b as q}from"./FilterApplyButton-C77GEhbY.js";import{_ as B}from"./FilterBooleanAutocomplete-gPWP_vh9.js";import"./useQueryParams-ByKhQHOC.js";import"./DefaultAutocomplete-Czwix3Fg.js";import"./StandardLabeledGroup-LekNWnmf.js";import"./filter-DSSeUQYK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./mdi-BiCQTzTv.js";import"./DefaultButton-BFphiFCx.js";const G={__name:"PermissionsFilter",setup(U){const{t:s}=g(),o=v(),u=y(),d=o.props.query,i=p(!1),e=p({});_(()=>{S(e.value,d,["global"]),M(e.value,d,["id","roles","department_id"])});const f=()=>{c.get(route(route().current()),e.value,{only:["records","query"],replace:!0,preserveState:!0,preserveScroll:!0,onStart:()=>i.value=!0,onSuccess:()=>u.addFilteredSuccessfullyMessage(),onError:()=>u.addFilteringFailedMessage(),onFinish:()=>i.value=!1})},b=()=>{c.get(route(route().current()),{},{data:{},only:["records","query"],replace:!0,onSuccess:()=>u.addFilterResetSuccessfullyMessage(),onError:()=>u.addFilterResetFailedMessage()})};return($,l)=>(V(),F(q,null,{resetButton:n(()=>[r(k,{onClick:b})]),applyButton:n(()=>[r(D,{onClick:f,loading:i.value},null,8,["loading"])]),default:n(()=>[r(m,{label:t(s)("fields.Name"),name:"id[]",modelValue:e.value.id,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.id=a),items:t(o).props.filterDependencies.permissions,multiple:""},null,8,["label","modelValue","items"]),r(m,{label:t(s)("Roles"),name:"roles",modelValue:e.value.roles,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.roles=a),items:t(o).props.filterDependencies.roles,multiple:""},null,8,["label","modelValue","items"]),r(m,{label:t(s)("Departments"),name:"department_id",modelValue:e.value.department_id,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.department_id=a),items:t(o).props.filterDependencies.departments,"item-title":"abbreviation",multiple:""},null,8,["label","modelValue","items"]),r(B,{label:t(s)("properties.Global"),name:"global",modelValue:e.value.global,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.global=a)},null,8,["label","modelValue"])]),_:1}))}};export{G as default};
