import{u as b,d as v,h as p,i as _,c as F,o as V,w as n,a as t,b as r,j as c}from"./app-DFGAykv1.js";import{u as y}from"./messages-DM6Hzgr9.js";import{n as S,a as M}from"./queryHelper-zuYrvkeK.js";import{_ as D}from"./MainFilter-K63gvGDZ.js";import{F as m,_ as k,a as q}from"./FilterApplyButton-BSfidlWh.js";import{_ as B}from"./FilterBooleanAutocomplete-CYuhVeGL.js";import"./useQueryParams-siJr2X5G.js";import"./DefaultAutocomplete-D2AwreME.js";import"./StandardLabeledGroup-DZwc3k__.js";import"./filter-DJBblzN3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./mdi-_GS73Yti.js";import"./DefaultButton-BwBxuaXS.js";const H={__name:"PermissionsFilter",setup(U){const{t:o}=b(),s=v(),u=y(),d=s.props.query,i=p(!1),e=p({});_(()=>{S(e.value,d,["global"]),M(e.value,d,["id","roles","department_id"])});const f=()=>{c.get(route(route().current()),e.value,{only:["records","query"],replace:!0,preserveState:!0,preserveScroll:!0,onStart:()=>i.value=!0,onSuccess:()=>u.addFilteredSuccessfullyMessage(),onError:()=>u.addFilteringFailedMessage(),onFinish:()=>i.value=!1})},g=()=>{c.get(route(route().current()),{},{data:{},only:["records","query"],replace:!0,onSuccess:()=>u.addFilterResetSuccessfullyMessage(),onError:()=>u.addFilterResetFailedMessage()})};return($,l)=>(V(),F(D,null,{resetButton:n(()=>[t(q,{onClick:g})]),applyButton:n(()=>[t(k,{onClick:f,loading:i.value},null,8,["loading"])]),default:n(()=>[t(m,{label:r(o)("fields.Name"),name:"id[]",modelValue:e.value.id,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.id=a),items:r(s).props.filterDependencies.permissions,multiple:""},null,8,["label","modelValue","items"]),t(m,{label:r(o)("Roles"),name:"roles",modelValue:e.value.roles,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.roles=a),items:r(s).props.filterDependencies.roles,multiple:""},null,8,["label","modelValue","items"]),t(m,{label:r(o)("Departments"),name:"department_id",modelValue:e.value.department_id,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.department_id=a),items:r(s).props.filterDependencies.departments,"item-title":"abbreviation",multiple:""},null,8,["label","modelValue","items"]),t(B,{label:r(o)("properties.Global"),name:"global",modelValue:e.value.global,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.global=a)},null,8,["label","modelValue"])]),_:1}))}};export{H as default};
