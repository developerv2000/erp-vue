import{u as M,h as y,m as j,s as q,n as g,l as U,j as w,c as N,o as P,w as l,a,g as A,t as B,b as e,x as i}from"./app-B9LPjWSD.js";import{u as R,a as d,F as T}from"./vee-validate-CEw9W1pP.js";import{u as I}from"./useAuth-BdfaLBok.js";import{u as z}from"./useFormData-DEk4Ge6e.js";import{u as G}from"./messages-Bx-X0MsL.js";import{D as H}from"./DefaultSheet-CUJFLEyh.js";import{_ as J}from"./DefaultTitle-DGhQm38J.js";import{_ as V}from"./DefaultTextField-xUJUpIqx.js";import{_ as K}from"./DefaultFileInput-am6oozRt.js";import{F as L}from"./FormActionsContainer-Dq-nzt-A.js";import{_ as O}from"./FormResetButton-SAU_D-pz.js";import{_ as Q}from"./FormUpdateButton-C-yPBbxU.js";import{V as W,a as p}from"./VRow-YwEE9k1_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./WrappedLabelGroup-DQK6QduX.js";import"./StandardLabeledGroup-BZldPcee.js";import"./mdi-BiCQTzTv.js";import"./DefaultButton-BY5T7BWX.js";const ge={__name:"PersonalDataForm",setup(X){const{t:s}=M(),{objectToFormData:v}=z(),{user:f}=I(),c=G(),t=y(!1),F=j({name:g().required(),email:g().required().email(),photo:q().nullable()}),{handleSubmit:b,setErrors:h,resetForm:S,setFieldValue:$,meta:C}=R({validationSchema:F,initialValues:U(()=>({name:f.value.name,email:f.value.email,photo:null}))}),{value:m,errorMessage:D}=d("name"),{value:u,errorMessage:E}=d("email"),{value:n,errorMessage:k}=d("photo"),x=b(_=>{const o=v(_);w.post(route("profile.update-personal-data"),o,{forceFormData:!0,only:["auth"],onStart:()=>{t.value=!0},onError:r=>{h(r),c.addFixErrorsMessage()},onSuccess:()=>{$("photo",null),c.addUpdatedSuccessfullyMessage()},onFinish:()=>{t.value=!1}})});return(_,o)=>(P(),N(e(T),{enctype:"multipart/form-data"},{default:l(()=>[a(H,null,{default:l(()=>[a(J,null,{default:l(()=>[A(B(e(s)("forms.Personal data")),1)]),_:1}),a(W,null,{default:l(()=>[a(p,null,{default:l(()=>[a(V,{label:e(s)("fields.Name"),modelValue:e(m),"onUpdate:modelValue":o[0]||(o[0]=r=>i(m)?m.value=r:null),"error-messages":e(D),required:""},null,8,["label","modelValue","error-messages"])]),_:1}),a(p,null,{default:l(()=>[a(V,{label:e(s)("fields.Email"),type:"email",modelValue:e(u),"onUpdate:modelValue":o[1]||(o[1]=r=>i(u)?u.value=r:null),"error-messages":e(E),required:""},null,8,["label","modelValue","error-messages"])]),_:1}),a(p,null,{default:l(()=>[a(K,{label:e(s)("fields.Photo"),accept:".png, .jpg, .jpeg",modelValue:e(n),"onUpdate:modelValue":o[2]||(o[2]=r=>i(n)?n.value=r:null),"error-messages":e(k)},null,8,["label","modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),a(L,{class:"mt-5"},{default:l(()=>[a(O,{onClick:e(S),loading:t.value},null,8,["onClick","loading"]),a(Q,{onClick:e(x),loading:t.value,disabled:!e(C).valid},null,8,["onClick","loading","disabled"])]),_:1})]),_:1}))}};export{ge as default};
