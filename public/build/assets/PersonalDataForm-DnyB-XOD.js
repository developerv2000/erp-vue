import{u as M,h as y,v as j,A as q,x as g,s as U,j as w,c as A,o as N,w as l,a,g as P,t as B,b as e,C as i}from"./app-CGP4rxJE.js";import{u as R,a as d,F as T}from"./vee-validate-D5VtrSr7.js";import{u as I}from"./useAuth-ByzK3C_d.js";import{u as z}from"./useFormData-CgBSWld4.js";import{u as G}from"./messages-DcN_lpLJ.js";import{D as H}from"./DefaultSheet-Ci6LlMOc.js";import{_ as J}from"./DefaultTitle-DvYGaA2o.js";import{_ as V}from"./DefaultTextField-B-EuZCRI.js";import{_ as K}from"./DefaultFileInput-D2gCXYHc.js";import{F as L}from"./FormActionsContainer-BCAfWwIO.js";import{_ as O}from"./FormResetButton-lKyN_xjj.js";import{_ as Q}from"./FormUpdateButton-BTvHNMjV.js";import{V as W,a as p}from"./VRow-E2o2U0ol.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./WrappedLabelGroup-B8Kd4-oq.js";import"./StandardLabeledGroup-Q1663vpn.js";import"./mdi-BINEaKNx.js";import"./DefaultButton-C2shneeD.js";const ge={__name:"PersonalDataForm",setup(X){const{t:s}=M(),{objectToFormData:v}=z(),{user:f}=I(),c=G(),t=y(!1),F=j({name:g().required(),email:g().required().email(),photo:q().nullable()}),{handleSubmit:b,setErrors:h,resetForm:C,setFieldValue:S,meta:$}=R({validationSchema:F,initialValues:U(()=>({name:f.value.name,email:f.value.email,photo:null}))}),{value:m,errorMessage:D}=d("name"),{value:u,errorMessage:E}=d("email"),{value:n,errorMessage:k}=d("photo"),x=b(_=>{const o=v(_);w.post(route("profile.update-personal-data"),o,{forceFormData:!0,only:["auth"],onStart:()=>{t.value=!0},onError:r=>{h(r),c.addFixErrorsMessage()},onSuccess:()=>{S("photo",null),c.addUpdatedSuccessfullyMessage()},onFinish:()=>{t.value=!1}})});return(_,o)=>(N(),A(e(T),{enctype:"multipart/form-data"},{default:l(()=>[a(H,null,{default:l(()=>[a(J,null,{default:l(()=>[P(B(e(s)("forms.Personal data")),1)]),_:1}),a(W,null,{default:l(()=>[a(p,null,{default:l(()=>[a(V,{label:e(s)("fields.Name"),modelValue:e(m),"onUpdate:modelValue":o[0]||(o[0]=r=>i(m)?m.value=r:null),"error-messages":e(D),required:""},null,8,["label","modelValue","error-messages"])]),_:1}),a(p,null,{default:l(()=>[a(V,{label:e(s)("fields.Email"),type:"email",modelValue:e(u),"onUpdate:modelValue":o[1]||(o[1]=r=>i(u)?u.value=r:null),"error-messages":e(E),required:""},null,8,["label","modelValue","error-messages"])]),_:1}),a(p,null,{default:l(()=>[a(K,{label:e(s)("fields.Photo"),accept:".png, .jpg, .jpeg",modelValue:e(n),"onUpdate:modelValue":o[2]||(o[2]=r=>i(n)?n.value=r:null),"error-messages":e(k)},null,8,["label","modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),a(L,{class:"mt-5"},{default:l(()=>[a(O,{onClick:e(C),loading:t.value},null,8,["onClick","loading"]),a(Q,{onClick:e(x),loading:t.value,disabled:!e($).valid},null,8,["onClick","loading","disabled"])]),_:1})]),_:1}))}};export{ge as default};
