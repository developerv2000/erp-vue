import{h as C,r as M,j,cW as k,n as _,c as x,q as U,a as w,o as N,w as l,b as a,g as P,t as A,u as e,bf as i}from"./app-DAozJfJi.js";import{u as B,b as d,F as R}from"./vee-validate-D3eE-l8X.js";import{u as T}from"./useAuth-D4__BZl5.js";import{u as I}from"./useFormData-CgBSWld4.js";import{u as W}from"./messages-DMYsu7y-.js";import{D as z}from"./DefaultSheet-Cb7a327k.js";import{_ as G}from"./DefaultTitle-DH_bbtU4.js";import{_ as g}from"./DefaultTextField-D3Lo5c6q.js";import{_ as H}from"./DefaultFileInput-izm0aEC9.js";import{F as J}from"./FormActionsContainer-Cdv5hsQI.js";import{_ as K}from"./FormResetButton-DpRbNtYy.js";import{_ as L}from"./FormUpdateButton-Cmr3SaY5.js";import{V as O,a as p}from"./VRow-BvpG3oFW.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./WrappedLabelGroup-D-KlSZGz.js";import"./StandardLabeledGroup-DxZxJ086.js";import"./mdi-B8JOKl2S.js";import"./DefaultButton-KwobY4u7.js";const _e={__name:"PersonalDataForm",setup(Q){const{t:s}=C(),{objectToFormData:V}=I(),{user:f}=T(),b=W(),t=M(!1),F=j({name:_().required(),email:_().required().email(),photo:k().nullable()}),{handleSubmit:v,setErrors:h,resetForm:S,setFieldValue:$}=B({validationSchema:F,initialValues:x(()=>({name:f.value.name,email:f.value.email,photo:null}))}),{value:m,errorMessage:D}=d("name"),{value:u,errorMessage:E}=d("email"),{value:n,errorMessage:q}=d("photo"),y=v(c=>{const o=V(c);U.post(route("profile.update-personal-data"),o,{forceFormData:!0,only:["auth"],onStart:()=>{t.value=!0},onError:r=>{h(r)},onSuccess:()=>{$("photo",null),b.addUpdatedSuccessfullyMessage()},onFinish:()=>{t.value=!1}})});return(c,o)=>(N(),w(z,null,{default:l(()=>[a(G,null,{default:l(()=>[P(A(e(s)("forms.Personal data")),1)]),_:1}),a(e(R),{onSubmit:e(y),enctype:"multipart/form-data"},{default:l(()=>[a(O,null,{default:l(()=>[a(p,null,{default:l(()=>[a(g,{label:e(s)("fields.Name"),modelValue:e(m),"onUpdate:modelValue":o[0]||(o[0]=r=>i(m)?m.value=r:null),"error-messages":e(D),required:""},null,8,["label","modelValue","error-messages"])]),_:1}),a(p,null,{default:l(()=>[a(g,{label:e(s)("fields.Email"),type:"email",modelValue:e(u),"onUpdate:modelValue":o[1]||(o[1]=r=>i(u)?u.value=r:null),"error-messages":e(E),required:""},null,8,["label","modelValue","error-messages"])]),_:1}),a(p,null,{default:l(()=>[a(H,{label:e(s)("fields.Photo"),accept:".png, .jpg, .jpeg",modelValue:e(n),"onUpdate:modelValue":o[2]||(o[2]=r=>i(n)?n.value=r:null),"error-messages":e(q)},null,8,["label","modelValue","error-messages"])]),_:1})]),_:1}),a(J,{class:"mt-5"},{default:l(()=>[a(L,{loading:t.value},null,8,["loading"]),a(K,{onClick:e(S)},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit"])]),_:1}))}};export{_e as default};
