import{a as g,o as u,u as o,w as t,a2 as z,ae as K,h as w,c as N,a1 as b,b as d,d as k,g as s,t as a,s as f,M as v,r as $,af as D,p as P,S as I,ag as R,i as U,E as Y}from"./app-DAozJfJi.js";import{u as j}from"./useQueryParams-CMSqShEk.js";import{u as V}from"./processesTable-CuEddIT6.js";import{a as F,u as E}from"./useDateFormatter-D4LSNXaB.js";import{f as x}from"./utilities-BOpNCN-e.js";import{g as A,T as B,_ as S,a as q,b as G,c as H,d as O,e as L,f as Q,D as W,V as J}from"./TableNavigateToPage-DFsNI4M6.js";import X from"./ProcessesTableTop-CLDNMjiW.js";import{T as Z}from"./TableDefaultSkeleton-C66Qpr4n.js";import{h as ee}from"./mdi-B8JOKl2S.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as M}from"./messages-DMYsu7y-.js";import{u as C}from"./global-tXBlfjCw.js";import"./queryHelper-BKcNnwTA.js";import"./VTable-COaqrT5-.js";import"./InertiaLink-xWejzHcQ.js";import"./useAuth-D4__BZl5.js";import"./FullscreenListItem-DKcGbfwO.js";import"./DefaultButton-KwobY4u7.js";import"./ExportButton-BxL802nl.js";import"./VRow-BvpG3oFW.js";import"./VSwitch-ivR2wn1Y.js";import"./VNumberInput-msrK-wkm.js";import"./InertiaLinkedListItem-Cv6kJjpB.js";import"./layout-Bo_OQH9F.js";import"./filter-DPydDAdU.js";const ae={__name:"TdDuplicateButton",props:{link:{type:String,required:!0}},setup(r){return(l,p)=>(u(),g(A,{color:"green",variant:"tonal",size:"small",icon:o(ee),link:r.link},null,8,["icon","link"]))}},re={};function se(r,l){return u(),g(K,{class:"px-2",variant:"flat",size:"small",label:""},{default:t(()=>[z(r.$slots,"default")]),_:3})}const oe=te(re,[["render",se]]),ne={class:"mt-1 text-lowercase"},de={__name:"TdProcessDeadlineStatus",props:{record:Object},setup(r){const l=r,{t:p}=w(),_=N(()=>{switch(l.record.deadline_status){case"Stopped":return"grey-lighten-3";case"No deadline":return"light-green-accent-1";case"Not expired":return"orange-lighten-3";case"Expired":return"pink-lighten-3"}});return(n,i)=>(u(),b(v,null,[d(oe,{class:"mb-1",color:_.value},{default:t(()=>[s(a(r.record.deadline_status),1)]),_:1},8,["color"]),i[0]||(i[0]=k("br",null,null,-1)),k("span",ne,[r.record.deadline_status=="Not expired"?(u(),b(v,{key:0},[s(a(r.record.days_past_since_last_activity)+" "+a(o(p)("days.past")),1)],64)):f("",!0),r.record.deadline_status=="Expired"?(u(),b(v,{key:1},[s(a(r.record.days_past_since_last_activity-15)+" "+a(o(p)("Days")),1)],64)):f("",!0)])],64))}},ie={__name:"TdProcessContractedInAsp",props:{record:Object},setup(r){const l=r,p=V(),_=C(),n=M(),i=$(!!l.record.contracted_in_asp),h=m=>{_.loading=!0,P.post(route("mad.processes.update-contracted-in-asp-value"),{id:l.record.id,new_value:m}).then(c=>{n.addSuccessMessage(),p.updateRecord(c.data)}).catch(()=>{n.addSubmitionFailedMessage()}).finally(()=>{_.loading=!1})};return(m,c)=>(u(),g(D,{color:"secondary",density:"compact","hide-details":!0,modelValue:i.value,"onUpdate:modelValue":[c[0]||(c[0]=e=>i.value=e),h]},null,8,["modelValue"]))}},ce={__name:"TdProcessRegisteredInAsp",props:{record:Object},setup(r){const l=r,p=V(),_=C(),n=M(),i=$(!!l.record.registered_in_asp),h=m=>{_.loading=!0,P.post(route("mad.processes.update-registered-in-asp-value"),{id:l.record.id,new_value:m}).then(c=>{n.addSuccessMessage(),p.updateRecord(c.data)}).catch(()=>{n.addSubmitionFailedMessage()}).finally(()=>{_.loading=!1})};return(m,c)=>(u(),g(D,{color:"secondary",density:"compact","hide-details":!0,modelValue:i.value,"onUpdate:modelValue":[c[0]||(c[0]=e=>i.value=e),h]},null,8,["modelValue"]))}},le={__name:"TdProcessReadinessForOder",props:{record:Object},setup(r){const l=r,p=V(),_=C(),n=M(),i=$(!!l.record.is_ready_for_order),h=m=>{_.loading=!0,P.post(route("mad.processes.update-ready-for-order-value"),{id:l.record.id,is_ready:m}).then(c=>{n.addSuccessMessage(),p.updateRecord(c.data)}).catch(()=>{n.addSubmitionFailedMessage()}).finally(()=>{_.loading=!1})};return(m,c)=>(u(),g(D,{color:"secondary",density:"compact","hide-details":!0,modelValue:i.value,"onUpdate:modelValue":[c[0]||(c[0]=e=>i.value=e),h]},null,8,["modelValue"]))}},ue={key:0,class:"d-flex flex-column ga-1"},_e={class:"text-lowercase"},me={key:0},y={__name:"TdProcessGeneralStatusPeriod",props:{record:Object,arrayKey:Number},setup(r){const{t:l}=w(),p=["secondary","primary","purple","pink","orange","lime","green-accent-3","cyan-accent-3","brown","grey"];return(_,n)=>r.record.general_statuses_with_periods[r.arrayKey].duration_days?(u(),b("div",ue,[k("span",_e,a(r.record.general_statuses_with_periods[r.arrayKey].duration_days)+" "+a(o(l)("Days")),1),k("hr",{style:R({height:"4px",width:r.record.general_statuses_with_periods[r.arrayKey].duration_days_ratio+"%"}),class:I("border-0 bg-"+p[r.arrayKey])},null,6),r.record.general_statuses_with_periods[r.arrayKey].start_date&&r.record.general_statuses_with_periods[r.arrayKey].end_date?(u(),b("span",me,a(o(F)(r.record.general_statuses_with_periods[r.arrayKey].start_date,"DD/MM/YYYY"))+" - "+a(o(F)(r.record.general_statuses_with_periods[r.arrayKey].end_date,"DD/MM/YYYY")),1)):f("",!0)])):f("",!0)}},pe={key:0},Ye={__name:"ProcessesTable",setup(r){const{t:l}=w(),{get:p}=j(),_=U(),n=V(),{formatDate:i}=E();Y(()=>{(!n.initializedFromInertiaPage||p("initialize_from_inertia_page"))&&n.initFromInertiaPage(_),n.detectCurrentPage(),n.fetchRecords({updateUrl:!0})});function h(m){n.fetchRecordsIfOptionsChanged(m)}return(m,c)=>(u(),g(J,{class:"main-table main-table--limited-height main-table--with-filter",headers:o(_).props.tableVisibleHeaders,modelValue:o(n).selected,"onUpdate:modelValue":c[0]||(c[0]=e=>o(n).selected=e),items:o(n).records,"items-length":o(n).pagination.total_records,page:o(n).pagination.page,"items-per-page":o(n).pagination.per_page,"items-per-page-options":o(W),"sort-by":[{key:o(n).pagination.order_by,order:o(n).pagination.order_direction}],"onUpdate:options":h,loading:o(n).loading,"must-sort":"","show-select":"","show-current-page":"","fixed-header":"",hover:""},{top:t(()=>[d(X)]),loading:t(()=>[d(Z)]),"footer.prepend":t(()=>[d(Q,{store:o(n)},null,8,["store"])]),"item.deleted_at":t(({item:e})=>[s(a(o(i)(e.deleted_at)),1)]),"item.edit":t(({item:e})=>[d(L,{link:m.route("mad.processes.edit",e.id)},null,8,["link"])]),"item.duplicate":t(({item:e})=>[d(ae,{link:m.route("mad.processes.duplicate",e.id)},null,8,["link"])]),"item.last_status_date":t(({item:e})=>[s(a(o(i)(e.status_history[e.status_history.length-1].start_date)),1)]),"item.deadline_status":t(({item:e})=>[d(de,{record:e},null,8,["record"])]),"item.contracted_in_asp":t(({item:e})=>[e.is_ready_for_asp_contract?(u(),g(ie,{key:0,record:e},null,8,["record"])):f("",!0)]),"item.registered_in_asp":t(({item:e})=>[e.is_ready_for_asp_registration?(u(),g(ce,{key:0,record:e},null,8,["record"])):f("",!0)]),"item.readiness_for_order_date":t(({item:e})=>[e.can_be_marked_as_ready_for_order?(u(),g(le,{key:0,record:e},null,8,["record"])):f("",!0)]),"item.status_id":t(({item:e})=>[s(a(e.status.name),1)]),"item.general_status_name_for_analysts":t(({item:e})=>[s(a(e.status.general_status.name_for_analysts),1)]),"item.general_status_name":t(({item:e})=>[s(a(e.status.general_status.name),1)]),"item.manufacturer_bdm":t(({item:e})=>[d(O,{user:e.product.manufacturer.bdm},null,8,["user"])]),"item.manufacturer_analyst":t(({item:e})=>[d(O,{user:e.product.manufacturer.analyst},null,8,["user"])]),"item.country_id":t(({item:e})=>[s(a(e.search_country.code),1)]),"item.manufacturer_category_name":t(({item:e})=>[d(H,{name:e.product.manufacturer.category.name},null,8,["name"])]),"item.manufacturer_country_name":t(({item:e})=>[s(a(e.product.manufacturer.country.name),1)]),"item.product_manufacturer_name":t(({item:e})=>[s(a(e.product.manufacturer.name),1)]),"item.product_inn_name":t(({item:e})=>[d(S,{text:e.product.inn.name},null,8,["text"])]),"item.product_form_name":t(({item:e})=>[s(a(e.product.form.name),1)]),"item.product_dosage":t(({item:e})=>[d(S,{text:e.product.dosage},null,8,["text"])]),"item.product_pack":t(({item:e})=>[s(a(e.product.pack),1)]),"item.product_moq":t(({item:e})=>[s(a(o(x)(e.product.moq)),1)]),"item.product_shelf_life":t(({item:e})=>[s(a(e.product.shelf_life.name),1)]),"item.currency_id":t(({item:e})=>[s(a(e.currency?.name),1)]),"item.increased_price_percentage":t(({item:e})=>[e.increased_price_percentage?(u(),b("span",pe,a(e.increased_price_percentage)+" % ",1)):f("",!0)]),"item.increased_price_date":t(({item:e})=>[s(a(o(i)(e.increased_price_date)),1)]),"item.product_class":t(({item:e})=>[d(G,{class:"text-green"},{default:t(()=>[s(a(e.product.class.name),1)]),_:2},1024)]),"item.product_atx_name":t(({item:e})=>[e.product.atx?(u(),g(S,{key:0,text:e.product.atx.name},null,8,["text"])):f("",!0)]),"item.product_atx_short_name":t(({item:e})=>[s(a(e.product.atx?.short_name),1)]),"item.marketing_authorization_holder_id":t(({item:e})=>[s(a(e.mah?.name),1)]),"item.forecast_year_1_update_date":t(({item:e})=>[s(a(o(i)(e.forecast_year_1_update_date)),1)]),"item.forecast_year_1":t(({item:e})=>[s(a(o(x)(e.forecast_year_1)),1)]),"item.forecast_year_2":t(({item:e})=>[s(a(o(x)(e.forecast_year_2)),1)]),"item.forecast_year_3":t(({item:e})=>[s(a(o(x)(e.forecast_year_3)),1)]),"item.clinical_trial_countries_name":t(({item:e})=>[s(a(e.clinical_trial_countries.map(T=>T.name).join(" ")),1)]),"item.product_zones_name":t(({item:e})=>[k("span",null,a(e.product.zones.map(T=>T.name).join(" ")),1)]),"item.responsible_person_id":t(({item:e})=>[s(a(e.responsible_person.name),1)]),"item.responsible_person_update_date":t(({item:e})=>[s(a(o(i)(e.responsible_person_update_date)),1)]),"item.days_past":t(({item:e})=>[s(a(e.days_past),1)]),"item.created_at":t(({item:e})=>[s(a(o(i)(e.created_at)),1)]),"item.updated_at":t(({item:e})=>[s(a(o(i)(e.updated_at)),1)]),"item.comments_count":t(({item:e})=>[d(q,{record:e},null,8,["record"])]),"item.last_comment_body":t(({item:e})=>[d(S,{text:e.last_comment?.body},null,8,["text"])]),"item.last_comment_created_at":t(({item:e})=>[s(a(o(i)(e.last_comment?.created_at)),1)]),"item.status_history":t(({item:e})=>[d(B,{link:m.route("mad.processes.status-history.index",e.id)},{default:t(()=>[s(a(o(l)("History")),1)]),_:1},8,["link"])]),"item.general_status_periods_1":t(({item:e})=>[d(y,{record:e,"array-key":0},null,8,["record"])]),"item.general_status_periods_2":t(({item:e})=>[d(y,{record:e,"array-key":1},null,8,["record"])]),"item.general_status_periods_3":t(({item:e})=>[d(y,{record:e,"array-key":2},null,8,["record"])]),"item.general_status_periods_4":t(({item:e})=>[d(y,{record:e,"array-key":3},null,8,["record"])]),"item.general_status_periods_5":t(({item:e})=>[d(y,{record:e,"array-key":4},null,8,["record"])]),"item.general_status_periods_6":t(({item:e})=>[d(y,{record:e,"array-key":5},null,8,["record"])]),"item.general_status_periods_7":t(({item:e})=>[d(y,{record:e,"array-key":6},null,8,["record"])]),"item.general_status_periods_8":t(({item:e})=>[d(y,{record:e,"array-key":7},null,8,["record"])]),"item.general_status_periods_9":t(({item:e})=>[d(y,{record:e,"array-key":8},null,8,["record"])]),"item.general_status_periods_10":t(({item:e})=>[d(y,{record:e,"array-key":9},null,8,["record"])]),_:1},8,["headers","modelValue","items","items-length","page","items-per-page","items-per-page-options","sort-by","loading"]))}};export{Ye as default};
