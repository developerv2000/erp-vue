import{c as f,o as u,b as o,w as t,aM as O,bi as z,u as w,l as K,f as b,a as i,e as k,g as s,t as r,k as g,F as T,h as $,db as D,v as P,aN as U,aS as I,d as R,i as Y}from"./app-BLgoNwh9.js";import{u as j}from"./useQueryParams-DDDdTybf.js";import{u as V}from"./processesTable-uA5X_qMy.js";import{a as F,u as E}from"./useDateFormatter-DW7w93RU.js";import{f as x}from"./utilities-BOpNCN-e.js";import{_ as A,D as B,V as q}from"./TableNavigateToPage-BF9zRBEk.js";import G from"./ProcessesTableTop-xmjWkIRy.js";import{T as H}from"./TableDefaultSkeleton-Dg0bwIG3.js";import{_ as L}from"./TdEditButton-BtitC7Ay.js";import{_ as Q}from"./InertiaLinkedButtonedIcon-CPtNgviF.js";import{U as W}from"./mdi-FFd_BlEo.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as S,a as N}from"./TogglableThreeLinesLimitedText-C0esRJuu.js";import{T as X}from"./TdInertiaLink-B66W5Sot.js";import{_ as Z}from"./TdRecordCommentsLink-DN54Q0sd.js";import{T as ee}from"./TdMediumWeightText-BqKl-NXH.js";import{u as M}from"./messages-Daw9qpnw.js";import{u as C}from"./global-p80oGj8c.js";import{_ as te}from"./TdManufacturerCategory-ptsMTx8N.js";import"./queryHelper-C2x2SXyh.js";import"./VTable-C7nmxiMy.js";import"./useAuth-DdAYRigt.js";import"./DefaultTableToolbar-BmKHFmfD.js";import"./DefaultButton-As932Yet.js";import"./DeleteSelectedButton-CjQzwmLd.js";import"./ExportButton-DBmpCOw7.js";import"./InertiaLinkedListItem-C0g-MFzj.js";import"./layout-y2KlO_d9.js";import"./ColumnsListItem-oruNqJZa.js";import"./VRow-CyYZUeep.js";import"./VSwitch-y5heEXKx.js";import"./VNumberInput-C_RYYyP0.js";import"./FullscreenListItem-Dog8D9S_.js";import"./ExportProductSelectionButton-CThPTHs1.js";import"./filter-p85kxTXY.js";import"./InertiaLink-BbqYSPzp.js";import"./notifications-D7-HyuMy.js";import"./processStatusHistoryTable-CBjXxKTj.js";import"./productsTable-BLcZaBVv.js";import"./attachments-CxQdauOI.js";import"./comments-Ay0h32nL.js";import"./manufacturersTable-DrB2o6yK.js";import"./usersTable-DsixxUmd.js";import"./kpi-DKQzWN0y.js";const re={__name:"TdDuplicateButton",props:{link:{type:String,required:!0}},setup(a){return(l,p)=>(u(),f(Q,{color:"green",variant:"tonal",size:"small",icon:o(W),link:a.link},null,8,["icon","link"]))}},ae={};function se(a,l){return u(),f(z,{class:"px-2",variant:"flat",size:"small",label:""},{default:t(()=>[O(a.$slots,"default")]),_:3})}const oe=J(ae,[["render",se]]),ne={class:"mt-1 text-lowercase"},ie={__name:"TdProcessDeadlineStatus",props:{record:Object},setup(a){const l=a,{t:p}=w(),_=K(()=>{switch(l.record.deadline_status){case"Stopped":return"grey-lighten-3";case"No deadline":return"light-green-lighten-1";case"Not expired":return"orange-lighten-3";case"Expired":return"pink-lighten-3"}});return(n,d)=>(u(),b(T,null,[i(oe,{class:"mb-1",color:_.value},{default:t(()=>[s(r(a.record.deadline_status),1)]),_:1},8,["color"]),d[0]||(d[0]=k("br",null,null,-1)),k("span",ne,[a.record.deadline_status=="Not expired"?(u(),b(T,{key:0},[s(r(a.record.days_past_since_last_activity)+" "+r(o(p)("days.past")),1)],64)):g("",!0),a.record.deadline_status=="Expired"?(u(),b(T,{key:1},[s(r(a.record.days_past_since_last_activity-15)+" "+r(o(p)("Days")),1)],64)):g("",!0)])],64))}},de={__name:"TdProcessContractedInAsp",props:{record:Object},setup(a){const l=a,p=V(),_=C(),n=M(),d=$(!!l.record.contracted_in_asp),h=m=>{_.loading=!0,P.post(route("mad.processes.update-contracted-in-asp-value"),{id:l.record.id,new_value:m}).then(c=>{n.addSuccessMessage(),p.updateRecord(c.data)}).catch(c=>{c.response?.status===422?n.addValidationErrors(c.response.data.errors):n.addSubmitionFailedMessage()}).finally(()=>{_.loading=!1})};return(m,c)=>(u(),f(D,{color:"secondary",density:"compact","hide-details":!0,modelValue:d.value,"onUpdate:modelValue":[c[0]||(c[0]=e=>d.value=e),h]},null,8,["modelValue"]))}},ce={__name:"TdProcessRegisteredInAsp",props:{record:Object},setup(a){const l=a,p=V(),_=C(),n=M(),d=$(!!l.record.registered_in_asp),h=m=>{_.loading=!0,P.post(route("mad.processes.update-registered-in-asp-value"),{id:l.record.id,new_value:m}).then(c=>{n.addSuccessMessage(),p.updateRecord(c.data)}).catch(()=>{n.addSubmitionFailedMessage()}).finally(()=>{_.loading=!1})};return(m,c)=>(u(),f(D,{color:"secondary",density:"compact","hide-details":!0,modelValue:d.value,"onUpdate:modelValue":[c[0]||(c[0]=e=>d.value=e),h]},null,8,["modelValue"]))}},le={__name:"TdProcessReadinessForOder",props:{record:Object},setup(a){const l=a,p=V(),_=C(),n=M(),d=$(!!l.record.is_ready_for_order),h=m=>{_.loading=!0,P.post(route("mad.processes.update-ready-for-order-value"),{id:l.record.id,new_value:m}).then(c=>{n.addSuccessMessage(),p.updateRecord(c.data)}).catch(()=>{n.addSubmitionFailedMessage()}).finally(()=>{_.loading=!1})};return(m,c)=>(u(),f(D,{color:"secondary",density:"compact","hide-details":!0,modelValue:d.value,"onUpdate:modelValue":[c[0]||(c[0]=e=>d.value=e),h]},null,8,["modelValue"]))}},ue={key:0,class:"d-flex flex-column ga-1"},_e={class:"text-lowercase"},me={key:0},y={__name:"TdProcessGeneralStatusPeriod",props:{record:Object,arrayKey:Number},setup(a){const{t:l}=w(),p=["secondary","primary","purple","pink","orange","lime","green-accent-3","cyan-accent-3","brown","grey"];return(_,n)=>a.record.general_statuses_with_periods[a.arrayKey].duration_days?(u(),b("div",ue,[k("span",_e,r(a.record.general_statuses_with_periods[a.arrayKey].duration_days)+" "+r(o(l)("Days")),1),k("hr",{style:I({height:"4px",width:a.record.general_statuses_with_periods[a.arrayKey].duration_days_ratio+"%"}),class:U("border-0 bg-"+p[a.arrayKey])},null,6),a.record.general_statuses_with_periods[a.arrayKey].start_date&&a.record.general_statuses_with_periods[a.arrayKey].end_date?(u(),b("span",me,r(o(F)(a.record.general_statuses_with_periods[a.arrayKey].start_date,"DD/MM/YYYY"))+" - "+r(o(F)(a.record.general_statuses_with_periods[a.arrayKey].end_date,"DD/MM/YYYY")),1)):g("",!0)])):g("",!0)}},pe={key:0},ot={__name:"ProcessesTable",setup(a){const{t:l}=w(),{get:p}=j(),_=R(),n=V(),{formatDate:d}=E();Y(()=>{(!n.initializedFromInertiaPage||p("initialize_from_inertia_page"))&&n.initFromInertiaPage(_),n.detectCurrentPage(),n.fetchRecords({updateUrl:!0})});function h(m){n.fetchRecordsIfOptionsChanged(m)}return(m,c)=>(u(),f(q,{class:"main-table main-table--limited-height main-table--with-filter",headers:o(_).props.tableVisibleHeaders,modelValue:o(n).selected,"onUpdate:modelValue":c[0]||(c[0]=e=>o(n).selected=e),items:o(n).records,"items-length":o(n).pagination.total_records,page:o(n).pagination.page,"items-per-page":o(n).pagination.per_page,"items-per-page-options":o(B),"sort-by":[{key:o(n).pagination.order_by,order:o(n).pagination.order_direction}],"onUpdate:options":h,loading:o(n).loading,"must-sort":"","show-select":"","show-current-page":"","fixed-header":"",hover:""},{top:t(()=>[i(G)]),loading:t(()=>[i(H)]),"footer.prepend":t(()=>[i(A,{store:o(n)},null,8,["store"])]),"item.deleted_at":t(({item:e})=>[s(r(o(d)(e.deleted_at)),1)]),"item.edit":t(({item:e})=>[i(L,{link:m.route("mad.processes.edit",e.id)},null,8,["link"])]),"item.duplicate":t(({item:e})=>[i(re,{link:m.route("mad.processes.duplicate",e.id)},null,8,["link"])]),"item.last_status_date":t(({item:e})=>[s(r(o(d)(e.status_history[e.status_history.length-1].start_date)),1)]),"item.deadline_status":t(({item:e})=>[i(ie,{record:e},null,8,["record"])]),"item.contracted_in_asp":t(({item:e})=>[e.is_ready_for_asp_contract?(u(),f(de,{key:0,record:e},null,8,["record"])):g("",!0)]),"item.registered_in_asp":t(({item:e})=>[e.is_ready_for_asp_registration?(u(),f(ce,{key:0,record:e},null,8,["record"])):g("",!0)]),"item.readiness_for_order_date":t(({item:e})=>[e.can_be_marked_as_ready_for_order?(u(),f(le,{key:0,record:e},null,8,["record"])):g("",!0)]),"item.status_id":t(({item:e})=>[s(r(e.status.name),1)]),"item.general_status_name_for_analysts":t(({item:e})=>[s(r(e.status.general_status.name_for_analysts),1)]),"item.general_status_name":t(({item:e})=>[s(r(e.status.general_status.name),1)]),"item.manufacturer_bdm":t(({item:e})=>[i(N,{user:e.product.manufacturer.bdm},null,8,["user"])]),"item.manufacturer_analyst":t(({item:e})=>[i(N,{user:e.product.manufacturer.analyst},null,8,["user"])]),"item.country_id":t(({item:e})=>[s(r(e.search_country.code),1)]),"item.manufacturer_category_name":t(({item:e})=>[i(te,{name:e.product.manufacturer.category.name},null,8,["name"])]),"item.manufacturer_country_name":t(({item:e})=>[s(r(e.product.manufacturer.country.name),1)]),"item.product_manufacturer_name":t(({item:e})=>[s(r(e.product.manufacturer.name),1)]),"item.product_inn_name":t(({item:e})=>[i(S,{text:e.product.inn.name},null,8,["text"])]),"item.product_form_name":t(({item:e})=>[s(r(e.product.form.name),1)]),"item.product_dosage":t(({item:e})=>[i(S,{text:e.product.dosage},null,8,["text"])]),"item.product_pack":t(({item:e})=>[s(r(e.product.pack),1)]),"item.product_moq":t(({item:e})=>[s(r(o(x)(e.product.moq)),1)]),"item.product_shelf_life":t(({item:e})=>[s(r(e.product.shelf_life.name),1)]),"item.currency_id":t(({item:e})=>[s(r(e.currency?.name),1)]),"item.manufacturer_offered_price_in_usd":t(({item:e})=>[s(r(e.manufacturer_offered_price_in_usd),1)]),"item.increased_price_percentage":t(({item:e})=>[e.increased_price_percentage?(u(),b("span",pe,r(e.increased_price_percentage)+" % ",1)):g("",!0)]),"item.increased_price_date":t(({item:e})=>[s(r(o(d)(e.increased_price_date)),1)]),"item.product_class":t(({item:e})=>[i(ee,{class:"text-green"},{default:t(()=>[s(r(e.product.class.name),1)]),_:2},1024)]),"item.product_atx_name":t(({item:e})=>[e.product.atx?(u(),f(S,{key:0,text:e.product.atx.name},null,8,["text"])):g("",!0)]),"item.product_atx_short_name":t(({item:e})=>[s(r(e.product.atx?.short_name),1)]),"item.marketing_authorization_holder_id":t(({item:e})=>[s(r(e.mah?.name),1)]),"item.forecast_year_1_update_date":t(({item:e})=>[s(r(o(d)(e.forecast_year_1_update_date)),1)]),"item.forecast_year_1":t(({item:e})=>[s(r(o(x)(e.forecast_year_1)),1)]),"item.forecast_year_2":t(({item:e})=>[s(r(o(x)(e.forecast_year_2)),1)]),"item.forecast_year_3":t(({item:e})=>[s(r(o(x)(e.forecast_year_3)),1)]),"item.clinical_trial_countries_name":t(({item:e})=>[s(r(e.clinical_trial_countries.map(v=>v.name).join(" ")),1)]),"item.product_zones_name":t(({item:e})=>[k("span",null,r(e.product.zones.map(v=>v.name).join(" ")),1)]),"item.responsible_person_id":t(({item:e})=>[s(r(e.responsible_person.name),1)]),"item.responsible_person_update_date":t(({item:e})=>[s(r(o(d)(e.responsible_person_update_date)),1)]),"item.days_past":t(({item:e})=>[s(r(e.days_past),1)]),"item.created_at":t(({item:e})=>[s(r(o(d)(e.created_at)),1)]),"item.updated_at":t(({item:e})=>[s(r(o(d)(e.updated_at)),1)]),"item.comments_count":t(({item:e})=>[i(Z,{record:e},null,8,["record"])]),"item.last_comment_body":t(({item:e})=>[i(S,{class:"main-table__last-comment",text:e.last_comment?.body},null,8,["text"])]),"item.last_comment_created_at":t(({item:e})=>[s(r(o(d)(e.last_comment?.created_at)),1)]),"item.status_history":t(({item:e})=>[i(X,{link:m.route("mad.processes.status-history.index",e.id)},{default:t(()=>[s(r(o(l)("History")),1)]),_:1},8,["link"])]),"item.general_status_periods_1":t(({item:e})=>[i(y,{record:e,"array-key":0},null,8,["record"])]),"item.general_status_periods_2":t(({item:e})=>[i(y,{record:e,"array-key":1},null,8,["record"])]),"item.general_status_periods_3":t(({item:e})=>[i(y,{record:e,"array-key":2},null,8,["record"])]),"item.general_status_periods_4":t(({item:e})=>[i(y,{record:e,"array-key":3},null,8,["record"])]),"item.general_status_periods_5":t(({item:e})=>[i(y,{record:e,"array-key":4},null,8,["record"])]),"item.general_status_periods_6":t(({item:e})=>[i(y,{record:e,"array-key":5},null,8,["record"])]),"item.general_status_periods_7":t(({item:e})=>[i(y,{record:e,"array-key":6},null,8,["record"])]),"item.general_status_periods_8":t(({item:e})=>[i(y,{record:e,"array-key":7},null,8,["record"])]),"item.general_status_periods_9":t(({item:e})=>[i(y,{record:e,"array-key":8},null,8,["record"])]),"item.general_status_periods_10":t(({item:e})=>[i(y,{record:e,"array-key":9},null,8,["record"])]),_:1},8,["headers","modelValue","items","items-length","page","items-per-page","items-per-page-options","sort-by","loading"]))}};export{ot as default};
