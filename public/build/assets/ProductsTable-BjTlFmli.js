import{h as P,i as V,E as $,a as c,o as l,w as t,b as r,a1 as D,M as I,ad as w,g as o,t as i,u as a,s as p,d as f,e as F}from"./app-BN27vI2s.js";import{u as z}from"./useQueryParams-CtEffHTI.js";import{u as A}from"./productsTable-DKnPyvRA.js";import{u as E}from"./useDateFormatter-Cn1U-vQt.js";import{f as N}from"./utilities-BOpNCN-e.js";import{T as b,d as k,_ as d,a as R,b as g,c as S,e as U,f as q,D as v,V as B}from"./TableNavigateToPage-DQ9Jwf5L.js";import C from"./ProductsTableTop-CVW100Yk.js";import{_ as L}from"./InertiaLink-BaBkWODh.js";import{T as M}from"./TableDefaultSkeleton-BPJYWnxa.js";import{_ as O,T as j}from"./TdRecordAttachmentsLink-DK889cD6.js";import{z as G}from"./mdi-B8JOKl2S.js";import"./queryHelper-BKcNnwTA.js";import"./VTable-B0KKPXE6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useAuth-UORhjnOo.js";import"./FullscreenListItem-DVro-g3M.js";import"./DefaultButton-bK-sfj_8.js";import"./messages-Db4UKgA7.js";import"./NewRecordButton-DUxmueil.js";import"./ExportButton-B1BfMtzS.js";import"./VRow-BBoCECn2.js";import"./VSwitch-CiLd8Xz7.js";import"./VNumberInput-CVY8OHej.js";import"./InertiaLinkedListItem-Ded4aCbV.js";import"./layout-DiSJnLu0.js";import"./filter-C_VrKd3f.js";const be={__name:"ProductsTable",setup(H){const{t:h}=P(),{get:y}=z(),x=V(),n=A(),{formatDate:_}=E();$(()=>{(!n.initializedFromInertiaPage||y("initialize_from_inertia_page"))&&n.initFromInertiaPage(x),n.detectCurrentPage(),n.fetchRecords({updateUrl:!0})});function T(u){n.fetchRecordsIfOptionsChanged(u)}return(u,s)=>(l(),c(B,{class:"main-table main-table--limited-height main-table--with-filter",headers:a(x).props.tableVisibleHeaders,modelValue:a(n).selected,"onUpdate:modelValue":s[0]||(s[0]=e=>a(n).selected=e),items:a(n).records,"items-length":a(n).pagination.total_records,page:a(n).pagination.page,"items-per-page":a(n).pagination.per_page,"items-per-page-options":a(v),"sort-by":[{key:a(n).pagination.order_by,order:a(n).pagination.order_direction}],"onUpdate:options":T,loading:a(n).loading,"must-sort":"","show-select":"","show-current-page":"","fixed-header":"",hover:""},{top:t(()=>[r(C)]),loading:t(()=>[r(M)]),"footer.prepend":t(()=>[r(q,{store:a(n)},null,8,["store"])]),"item.deleted_at":t(({item:e})=>[o(i(a(_)(e.deleted_at)),1)]),"item.edit":t(({item:e})=>[r(U,{link:u.route("mad.products.edit",e.id)},null,8,["link"])]),"item.processes_count":t(({item:e})=>[r(L,{class:"d-flex ga-2 mb-2 text-high-emphasis",link:e.index_link_of_related_processes},{default:t(()=>[f("span",null,i(a(h)("processes.count",{count:e.processes_count})),1),r(F,{icon:a(G)},null,8,["icon"])]),_:2},1032,["link"]),r(b,{link:u.route("mad.processes.create",{product_id:e.id})},{default:t(()=>[f("span",null,i(a(h)("processes.add")),1)]),_:1},8,["link"])]),"item.manufacturer_category_name":t(({item:e})=>[r(S,{name:e.manufacturer.category.name},null,8,["name"])]),"item.manufacturer_country_name":t(({item:e})=>[o(i(e.manufacturer.country.name),1)]),"item.manufacturer_id":t(({item:e})=>[o(i(e.manufacturer.name),1)]),"item.inn_id":t(({item:e})=>[r(d,{text:e.inn.name},null,8,["text"])]),"item.form_id":t(({item:e})=>[o(i(e.form.name),1)]),"item.form_parent_name":t(({item:e})=>[o(i(e.form.parent_name),1)]),"item.dosage":t(({item:e})=>[r(d,{text:e.dosage},null,8,["text"])]),"item.moq":t(({item:e})=>[o(i(a(N)(e.moq)),1)]),"item.shelf_life_id":t(({item:e})=>[o(i(e.shelf_life.name),1)]),"item.class_id":t(({item:e})=>[r(g,{class:"text-green"},{default:t(()=>[o(i(e.class.name),1)]),_:2},1024)]),"item.atx_id":t(({item:e})=>[e.atx?(l(),c(d,{key:0,text:e.atx.name},null,8,["text"])):p("",!0)]),"item.atx_short_name":t(({item:e})=>[o(i(e.atx?.short_name),1)]),"item.dossier":t(({item:e})=>[r(d,{text:e.dossier},null,8,["text"])]),"item.zones_name":t(({item:e})=>[f("span",null,i(e.zones.map(m=>m.name).join(" ")),1)]),"item.bioequivalence":t(({item:e})=>[r(d,{text:e.bioequivalence},null,8,["text"])]),"item.registered_in_eu":t(({item:e})=>[e.registered_in_eu?(l(),c(g,{key:0,class:"text-pink-darken-3"},{default:t(()=>[...s[1]||(s[1]=[o(" Registered ",-1)])]),_:1})):p("",!0)]),"item.sold_in_eu":t(({item:e})=>[e.sold_in_eu?(l(),c(g,{key:0,class:"text-indigo"},{default:t(()=>[...s[2]||(s[2]=[o(" For sale ",-1)])]),_:1})):p("",!0)]),"item.comments_count":t(({item:e})=>[r(R,{record:e},null,8,["record"])]),"item.last_comment_body":t(({item:e})=>[r(d,{text:e.last_comment?.body},null,8,["text"])]),"item.last_comment_created_at":t(({item:e})=>[o(i(a(_)(e.last_comment?.created_at)),1)]),"item.manufacturer_bdm":t(({item:e})=>[r(k,{user:e.manufacturer.bdm},null,8,["user"])]),"item.manufacturer_analyst":t(({item:e})=>[r(k,{user:e.manufacturer.analyst},null,8,["user"])]),"item.created_at":t(({item:e})=>[o(i(a(_)(e.created_at)),1)]),"item.updated_at":t(({item:e})=>[o(i(a(_)(e.updated_at)),1)]),"item.matched_product_searches":t(({item:e})=>[(l(!0),D(I,null,w(e.matched_product_searches,m=>(l(),c(b,{key:m.id,link:u.route("mad.products.index",{"id[]":m.id})},{default:t(()=>[o(" # "+i(m.id)+" "+i(m.country.code),1)]),_:2},1032,["link"]))),128))]),"item.attachments_count":t(({item:e})=>[r(O,{record:e},null,8,["record"]),r(j,{attachments:e.attachments},null,8,["attachments"])]),_:1},8,["headers","modelValue","items","items-length","page","items-per-page","items-per-page-options","sort-by","loading"]))}};export{be as default};
