import{u as E,d as I,l as b,h as F,m as N,D as m,j as A,c as k,o as y,w as o,a as t,b as e,k as T}from"./app-B9LPjWSD.js";import{u as h,F as L}from"./vee-validate-CEw9W1pP.js";import{u as O}from"./useVeeFormFields-TGFQGttC.js";import{u as P}from"./useFormData-DEk4Ge6e.js";import{u as G}from"./messages-Bx-X0MsL.js";import{u as H}from"./useDateFormatter-BCAMysvV.js";import{D as S}from"./DefaultSheet-CUJFLEyh.js";import{_ as D}from"./DefaultWysiwyg-B2Vavwb9.js";import{F as J}from"./FormActionsContainer-Dq-nzt-A.js";import{_ as K}from"./FormResetButton-SAU_D-pz.js";import{a as Q,_ as W}from"./FormUpdateWithourRedirect-Dtea9Uf8.js";import{_}from"./DefaultDateInput-Blfg739d.js";import{V as $,a as d}from"./VRow-YwEE9k1_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./StandardLabeledGroup-BZldPcee.js";import"./DefaultButton-BY5T7BWX.js";import"./mdi-BiCQTzTv.js";const fe={__name:"SerializedByManufacturerEditForm",setup(X){const{t:i}=E(),{objectToFormData:q}=P(),x=I(),c=G(),{removeDateTimezonesFromFormData:C}=H(),r=b(()=>x.props.record),n=F(!1),p=F(!1),U=N({serialization_codes_request_date:m().nullable(),serialization_codes_sent_date:m().nullable(),serialization_report_recieved_date:m().nullable(),report_sent_to_hub_date:m().nullable()}),w=b(()=>({serialization_codes_request_date:r.value.serialization_codes_request_date,serialization_codes_sent_date:r.value.serialization_codes_sent_date,serialization_report_recieved_date:r.value.serialization_report_recieved_date,report_sent_to_hub_date:r.value.report_sent_to_hub_date})),M={comment:null},f=b(()=>({...w.value,...M})),{handleSubmit:R,errors:u,setErrors:B,resetForm:v,meta:V}=h({validationSchema:U,initialValues:f.value}),{values:s}=O(Object.keys(f.value)),g=R(z=>{const a=q(z);C(a),n.value=!0,axios.post(route("md.serialized-by-manufacturer.update",{record:r.value.id}),a).then(()=>{c.addUpdatedSuccessfullyMessage(),p.value?window.history.back():j()}).catch(l=>{l.response?.status===422?(B(l.response.data.errors),c.addFixErrorsMessage()):c.addSubmitionFailedMessage()}).finally(()=>{n.value=!1})}),j=()=>{A.reload({only:["record"],onSuccess:()=>{v({values:f.value})}})};return(z,a)=>(y(),k(e(L),{class:"d-flex flex-column ga-6 pb-8",enctype:"multipart/form-data"},{default:o(()=>[t(S,null,{default:o(()=>[t($,null,{default:o(()=>[t(d,{cols:"6"},{default:o(()=>[t(_,{label:e(i)("dates.Serialization codes request"),modelValue:e(s).serialization_codes_request_date,"onUpdate:modelValue":a[0]||(a[0]=l=>e(s).serialization_codes_request_date=l),"error-messages":e(u).serialization_codes_request_date},null,8,["label","modelValue","error-messages"])]),_:1}),t(d,{cols:"6"},{default:o(()=>[t(_,{label:e(i)("dates.Serialization codes sent"),modelValue:e(s).serialization_codes_sent_date,"onUpdate:modelValue":a[1]||(a[1]=l=>e(s).serialization_codes_sent_date=l),"error-messages":e(u).serialization_codes_sent_date},null,8,["label","modelValue","error-messages"])]),_:1}),t(d,{cols:"6"},{default:o(()=>[t(_,{label:e(i)("dates.Serialization report received"),modelValue:e(s).serialization_report_recieved_date,"onUpdate:modelValue":a[2]||(a[2]=l=>e(s).serialization_report_recieved_date=l),"error-messages":e(u).serialization_report_recieved_date},null,8,["label","modelValue","error-messages"])]),_:1}),t(d,{cols:"6"},{default:o(()=>[t(_,{label:e(i)("dates.Report sent to hub"),modelValue:e(s).report_sent_to_hub_date,"onUpdate:modelValue":a[3]||(a[3]=l=>e(s).report_sent_to_hub_date=l),"error-messages":e(u).report_sent_to_hub_date},null,8,["label","modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),t(S,null,{default:o(()=>[t($,null,{default:o(()=>[t(d,null,{default:o(()=>[t(D,{modelValue:e(s).comment,"onUpdate:modelValue":a[4]||(a[4]=l=>e(s).comment=l),label:e(i)("comments.New"),"error-messages":e(u).comment,folder:"comments"},null,8,["modelValue","label","error-messages"])]),_:1}),r.value.last_comment?(y(),k(d,{key:0},{default:o(()=>[t(D,{modelValue:r.value.last_comment.body,"onUpdate:modelValue":a[5]||(a[5]=l=>r.value.last_comment.body=l),label:e(i)("comments.Last"),disabled:""},null,8,["modelValue","label"])]),_:1})):T("",!0)]),_:1})]),_:1}),t(J,null,{default:o(()=>[t(K,{onClick:e(v),loading:n.value},null,8,["onClick","loading"]),t(Q,{onClick:a[6]||(a[6]=l=>{p.value=!1,e(g)()}),loading:n.value,disabled:!e(V).valid},null,8,["loading","disabled"]),t(W,{onClick:a[7]||(a[7]=l=>{p.value=!0,e(g)()}),loading:n.value,disabled:!e(V).valid},null,8,["loading","disabled"])]),_:1})]),_:1}))}};export{fe as default};
