import{u as k,c as u,o as m,w as a,g as i,t as r,b as t,v as T,d as w,i as C,a as p,f as h,k as b,F as y,e as F}from"./app-7F7n231s.js";import{u as N}from"./useQueryParams-By3b4qRt.js";import{u as S}from"./shipments-DLPNHamW.js";import{u as P}from"./useDateFormatter-aJ6VLTy8.js";import{_ as $,D,V as I}from"./TableNavigateToPage-JUjryIyR.js";import A from"./ShipmentsTableTop-CCJTa71p.js";import{T as M}from"./TableDefaultSkeleton-BaeU0W2c.js";import{_ as z}from"./TdEditButton-Dprr0zMl.js";import{T as R}from"./TdInertiaLink-BPZmPvGT.js";import{_ as U}from"./TogglableThreeLinesLimitedText-DyPGs0gT.js";import{_ as B}from"./TdRecordCommentsLink-C9WYyDNz.js";import{u as v}from"./messages-BpNGX81Q.js";import{u as x}from"./global-CYw4cvbg.js";import{_ as V}from"./DefaultButton-CwMkA5bK.js";import{V as E,N as O}from"./mdi-BZMfrfO1.js";import"./queryHelper-LZTJtzGq.js";import"./createRecordActions-BovokYM8.js";import"./VTable-U-Sj7N5B.js";import"./useAuth-DFZ3-HmZ.js";import"./DefaultTableToolbar-B9obmYFS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NewRecordButton-3sXsmVhF.js";import"./InertiaLinkedButton-CeFIEIeD.js";import"./DeleteSelectedButton-CdgdXmUZ.js";import"./ColumnsListItem-BX6KA4xS.js";import"./VRow-CyQ_eN64.js";import"./VSwitch-DlGrUDDt.js";import"./VNumberInput-C9eUyK9o.js";import"./FullscreenListItem-DSVypZo6.js";import"./filter-P6R30PoH.js";import"./InertiaLinkedButtonedIcon-CLMZoIa6.js";import"./InertiaLink-DCnIw60K.js";const q={__name:"TdShipmentComplete",props:{id:Number},setup(f){const c=f,{t:l}=k(),d=S(),o=x(),s=v(),_=()=>{o.loading=!0,T.post(route("import.shipments.complete",{record:c.id})).then(n=>{s.addSuccessMessage(),d.updateRecord(n.data)}).catch(()=>{s.addSubmitionFailedMessage()}).finally(()=>{o.loading=!1})};return(n,g)=>(m(),u(V,{size:"small","append-icon":t(E),color:"green",onClick:_},{default:a(()=>[i(r(t(l)("actions.Complete")),1)]),_:1},8,["append-icon"]))}},G={__name:"TdShipmentArriveAtWarehouse",props:{id:Number},setup(f){const c=f,{t:l}=k(),d=S(),o=x(),s=v(),_=()=>{o.loading=!0,T.post(route("import.shipments.arrive-at-warehouse",{record:c.id})).then(n=>{s.addSuccessMessage(),d.updateRecord(n.data)}).catch(()=>{s.addSubmitionFailedMessage()}).finally(()=>{o.loading=!1})};return(n,g)=>(m(),u(V,{size:"small","append-icon":t(O),color:"purple",onClick:_},{default:a(()=>[i(r(t(l)("actions.Arrived")),1)]),_:1},8,["append-icon"]))}},L={class:"text-lowercase"},H=["href"],xe={__name:"ShipmentsTable",setup(f){const{t:c}=k(),{get:l}=N(),d=w(),o=S(),{formatDate:s}=P();C(()=>{(!o.initializedFromInertiaPage||l("initialize_from_inertia_page"))&&o.initFromInertiaPage(d),o.fetchRecords({updateUrl:!0})});const _=n=>{o.fetchRecordsIfOptionsChanged(n)};return(n,g)=>(m(),u(I,{class:"main-table main-table--limited-height main-table--with-filter",headers:t(d).props.tableVisibleHeaders,modelValue:t(o).selected,"onUpdate:modelValue":g[0]||(g[0]=e=>t(o).selected=e),items:t(o).records,"items-length":t(o).pagination.total_records,page:t(o).pagination.page,"items-per-page":t(o).pagination.per_page,"items-per-page-options":t(D),"sort-by":[{key:t(o).pagination.order_by,order:t(o).pagination.order_direction}],"onUpdate:options":_,loading:t(o).loading,"must-sort":"","show-select":"","show-current-page":"","fixed-header":"",hover:""},{top:a(()=>[p(A)]),loading:a(()=>[p(M)]),"footer.prepend":a(()=>[p($,{store:t(o)},null,8,["store"])]),"item.edit":a(({item:e})=>[p(z,{link:n.route("import.shipments.edit",e.id)},null,8,["link"])]),"item.manufacturer_id":a(({item:e})=>[i(r(e.manufacturer.name),1)]),"item.products_count":a(({item:e})=>[p(R,{link:n.route("import.products.index",{"shipment_from_manufacturer_id[]":e.id,initialize_from_inertia_page:!0})},{default:a(()=>[i(r(e.products_count)+" ",1),F("span",L,r(t(c)("Products")),1)]),_:2},1032,["link"])]),"item.transportation_method_id":a(({item:e})=>[i(r(e.transportation_method.name),1)]),"item.destination_id":a(({item:e})=>[i(r(e.destination.name),1)]),"item.packing_list_file":a(({item:e})=>[e.packing_list_file?(m(),h("a",{key:0,class:"text-primary",href:e.packing_list_file_url,target:"_blank"},r(e.packing_list_file),9,H)):b("",!0)]),"item.transportation_requested_at":a(({item:e})=>[i(r(t(s)(e.transportation_requested_at)),1)]),"item.currency_id":a(({item:e})=>[i(r(e.currency.name),1)]),"item.rate_approved_at":a(({item:e})=>[i(r(t(s)(e.rate_approved_at)),1)]),"item.confirmed_at":a(({item:e})=>[i(r(t(s)(e.confirmed_at)),1)]),"item.completed_at":a(({item:e})=>[e.completed?(m(),h(y,{key:0},[i(r(t(s)(e.completed_at)),1)],64)):e.confirmed?(m(),u(q,{key:1,id:e.id},null,8,["id"])):b("",!0)]),"item.arrived_at_warehouse":a(({item:e})=>[e.has_arrived_at_warehouse?(m(),h(y,{key:0},[i(r(t(s)(e.arrived_at_warehouse)),1)],64)):e.completed?(m(),u(G,{key:1,id:e.id},null,8,["id"])):b("",!0)]),"item.comments_count":a(({item:e})=>[p(B,{record:e},null,8,["record"])]),"item.last_comment_body":a(({item:e})=>[p(U,{class:"main-table__last-comment",text:e.last_comment?.body},null,8,["text"])]),"item.created_at":a(({item:e})=>[i(r(t(s)(e.created_at)),1)]),"item.updated_at":a(({item:e})=>[i(r(t(s)(e.updated_at)),1)]),_:1},8,["headers","modelValue","items","items-length","page","items-per-page","items-per-page-options","sort-by","loading"]))}};export{xe as default};
