import{u as S,c,o as m,w as a,g as r,t as i,b as t,v as T,d as C,i as P,a as d,f,k as g,F as b,e as F}from"./app-Bv235s-M.js";import{u as $}from"./useQueryParams-Dab0YVoH.js";import{u as v}from"./shipments--jiYuqSt.js";import{u as A}from"./useDateFormatter-cYKpR2k9.js";import{_ as D,D as I,V as N}from"./TableNavigateToPage-CCv4YDf_.js";import z from"./ShipmentsTableTop-C2fgy3rF.js";import{T as M}from"./TableDefaultSkeleton-gBqwB-gP.js";import{_ as O}from"./TdEditButton-41ihSKtN.js";import{T as y}from"./TdInertiaLink-B1cB9PSQ.js";import{_ as R}from"./TogglableThreeLinesLimitedText-DTPersXd.js";import{_ as U}from"./TdRecordCommentsLink-CzX6cxvL.js";import{u as x}from"./messages-CrCj1jht.js";import{u as w}from"./global-C9k2byRd.js";import{_ as V}from"./DefaultButton-DBGLuZMW.js";import{W as B,O as E}from"./mdi-CnKAdudM.js";import"./queryHelper-LZTJtzGq.js";import"./createRecordActions-BovokYM8.js";import"./VTable-gLoNSE0h.js";import"./useAuth-CEuMeYAP.js";import"./DefaultTableToolbar-5yNsS9nc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NewRecordButton-nXV5MjEG.js";import"./InertiaLinkedButton-LlSQ5KkF.js";import"./DeleteSelectedButton-D7NimcWp.js";import"./ColumnsListItem-BTQnhMsp.js";import"./VRow-DQpkIAa1.js";import"./VSwitch-PRR1uVDR.js";import"./VNumberInput-CfdQXUlt.js";import"./FullscreenListItem-DZu5p2fy.js";import"./filter-ELhmIoIq.js";import"./InertiaLinkedButtonedIcon-B7VDdgSl.js";import"./InertiaLink-DdC26tK5.js";const q={__name:"TdShipmentComplete",props:{id:Number},setup(h){const p=h,{t:_}=S(),l=v(),o=w(),s=x(),u=()=>{o.loading=!0,T.post(route("import.shipments.complete",{record:p.id})).then(n=>{s.addSuccessMessage(),l.updateRecord(n.data)}).catch(()=>{s.addSubmitionFailedMessage()}).finally(()=>{o.loading=!1})};return(n,k)=>(m(),c(V,{size:"small","append-icon":t(B),color:"green",onClick:u},{default:a(()=>[r(i(t(_)("actions.Complete")),1)]),_:1},8,["append-icon"]))}},G={__name:"TdShipmentArriveAtWarehouse",props:{id:Number},setup(h){const p=h,{t:_}=S(),l=v(),o=w(),s=x(),u=()=>{o.loading=!0,T.post(route("import.shipments.arrive-at-warehouse",{record:p.id})).then(n=>{s.addSuccessMessage(),l.updateRecord(n.data)}).catch(()=>{s.addSubmitionFailedMessage()}).finally(()=>{o.loading=!1})};return(n,k)=>(m(),c(V,{size:"small","append-icon":t(E),color:"purple",onClick:u},{default:a(()=>[r(i(t(_)("actions.Arrived")),1)]),_:1},8,["append-icon"]))}},L={class:"text-lowercase"},W=["href"],H={key:0,class:"text-success"},we={__name:"ShipmentsTable",setup(h){const{t:p}=S(),{get:_}=$(),l=C(),o=v(),{formatDate:s}=A();P(()=>{(!o.initializedFromInertiaPage||_("initialize_from_inertia_page"))&&o.initFromInertiaPage(l),o.fetchRecords({updateUrl:!0})});const u=n=>{o.fetchRecordsIfOptionsChanged(n)};return(n,k)=>(m(),c(N,{class:"main-table main-table--limited-height main-table--with-filter",headers:t(l).props.tableVisibleHeaders,modelValue:t(o).selected,"onUpdate:modelValue":k[0]||(k[0]=e=>t(o).selected=e),items:t(o).records,"items-length":t(o).pagination.total_records,page:t(o).pagination.page,"items-per-page":t(o).pagination.per_page,"items-per-page-options":t(I),"sort-by":[{key:t(o).pagination.order_by,order:t(o).pagination.order_direction}],"onUpdate:options":u,loading:t(o).loading,"must-sort":"","show-select":"","show-current-page":"","fixed-header":"",hover:""},{top:a(()=>[d(z)]),loading:a(()=>[d(M)]),"footer.prepend":a(()=>[d(D,{store:t(o)},null,8,["store"])]),"item.edit":a(({item:e})=>[d(O,{link:n.route("import.shipments.edit",e.id)},null,8,["link"])]),"item.manufacturer_id":a(({item:e})=>[r(i(e.manufacturer.name),1)]),"item.products_count":a(({item:e})=>[d(y,{link:n.route("import.products.index",{"shipment_from_manufacturer_id[]":e.id,initialize_from_inertia_page:!0})},{default:a(()=>[r(i(e.products_count)+" ",1),F("span",L,i(t(p)("Products")),1)]),_:2},1032,["link"])]),"item.transportation_method_id":a(({item:e})=>[r(i(e.transportation_method.name),1)]),"item.destination_id":a(({item:e})=>[r(i(e.destination.name),1)]),"item.packing_list_file":a(({item:e})=>[e.packing_list_file?(m(),f("a",{key:0,class:"text-primary",href:e.packing_list_file_url,target:"_blank"},i(e.packing_list_file),9,W)):g("",!0)]),"item.transportation_requested_at":a(({item:e})=>[r(i(t(s)(e.transportation_requested_at)),1)]),"item.currency_id":a(({item:e})=>[r(i(e.currency.name),1)]),"item.rate_approved_at":a(({item:e})=>[r(i(t(s)(e.rate_approved_at)),1)]),"item.confirmed_at":a(({item:e})=>[r(i(t(s)(e.confirmed_at)),1)]),"item.completed_at":a(({item:e})=>[e.completed?(m(),f(b,{key:0},[r(i(t(s)(e.completed_at)),1)],64)):e.confirmed?(m(),c(q,{key:1,id:e.id},null,8,["id"])):g("",!0)]),"item.import_invoice":a(({item:e})=>[e.completed?(m(),f(b,{key:0},[e.can_attach_import_invoice?(m(),c(y,{key:0,link:n.route("import.invoices.create",{shipment_id:e.id})},{default:a(()=>[r(i(t(p)("actions.Add")),1)]),_:1},8,["link"])):(m(),c(y,{key:1,link:n.route("import.invoices.index",{"id[]":e.import_invoice.id,initialize_from_inertia_page:!0})},{default:a(()=>[r(" #"+i(e.import_invoice.id)+" ",1),e.import_invoice.payment_is_completed?(m(),f("span",H," - "+i(t(p)("properties.Paid")),1)):g("",!0)]),_:2},1032,["link"]))],64)):g("",!0)]),"item.arrived_at_warehouse":a(({item:e})=>[e.has_arrived_at_warehouse?(m(),f(b,{key:0},[r(i(t(s)(e.arrived_at_warehouse)),1)],64)):e.completed?(m(),c(G,{key:1,id:e.id},null,8,["id"])):g("",!0)]),"item.comments_count":a(({item:e})=>[d(U,{record:e},null,8,["record"])]),"item.last_comment_body":a(({item:e})=>[d(R,{class:"main-table__last-comment",text:e.last_comment?.body},null,8,["text"])]),"item.created_at":a(({item:e})=>[r(i(t(s)(e.created_at)),1)]),"item.updated_at":a(({item:e})=>[r(i(t(s)(e.updated_at)),1)]),_:1},8,["headers","modelValue","items","items-length","page","items-per-page","items-per-page-options","sort-by","loading"]))}};export{we as default};
