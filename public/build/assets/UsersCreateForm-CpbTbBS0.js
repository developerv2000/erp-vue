import{u as x,d as S,h as g,m as D,n as _,p as P,q as E,s as j,v as B,c as M,o as O,w as r,a as l,b as e}from"./app-D1YberCH.js";import{u as R,F as I}from"./vee-validate-CRXdF8qc.js";import{u as N}from"./useVeeFormFields-TdUDPrPF.js";import{u as A}from"./useFormData-CgBSWld4.js";import{u as T}from"./messages-PU5sv9nV.js";import{D as z}from"./DefaultSheet-C2bBCKsJ.js";import{_ as w}from"./DefaultTextField-BCoejoR8.js";import{_ as b}from"./DefaultAutocomplete-Bqve6lXq.js";import{_ as G}from"./DefaultFileInput-CaSAkIk2.js";import{F as H}from"./FormActionsContainer-DQSaP795.js";import{_ as J}from"./FormResetButton-A_7vTY9q.js";import{_ as K,a as L}from"./FormStoreAndReset-Dpq7YWXR.js";import{_ as Q}from"./FormStoreWithoutReseting-DF7K2k4t.js";import{m as W,a as X}from"./mdi-DZCuF3m0.js";import{V as Y,a as m}from"./VRow-CxkOp3uG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./WrappedLabelGroup-K36BtbtP.js";import"./StandardLabeledGroup-DleA-fvG.js";import"./filter-CSgERJoA.js";import"./DefaultButton-BPCRPKgW.js";const _e={__name:"UsersCreateForm",setup(Z){const{t}=x(),{objectToFormData:C}=A(),d=S(),c=T(),u=g(!1),n=g(!1),p=g(!1),f=g(!1),k=D({name:_().required(),email:_().email().required(),photo:j().required(),department_id:E().required(),roles:P().required().min(1),password:_().required().min(4)}),$={name:"",email:"",photo:null,department_id:null,roles:[],responsible_countries:[],permissions:[],password:null},{errors:i,handleSubmit:y,resetForm:F,setErrors:U,meta:V}=R({validationSchema:k,initialValues:{...$}}),{values:o}=N(Object.keys($)),v=y(q=>{n.value=!0;const s=C(q);B.post(route("administration.users.store"),s).then(()=>{c.addCreatedSuccessfullyMessage(),f.value&&F(),p.value&&window.history.back()}).catch(a=>{a.response?.status===422?(U(a.response.data.errors),c.addFixErrorsMessage()):c.addSubmitionFailedMessage()}).finally(()=>{n.value=!1})});return(q,s)=>(O(),M(e(I),{class:"d-flex flex-column ga-6 pb-8",enctype:"multipart/form-data"},{default:r(()=>[l(z,null,{default:r(()=>[l(Y,null,{default:r(()=>[l(m,{cols:"4"},{default:r(()=>[l(w,{label:e(t)("fields.Name"),modelValue:e(o).name,"onUpdate:modelValue":s[0]||(s[0]=a=>e(o).name=a),"error-messages":e(i).name,required:""},null,8,["label","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(w,{label:e(t)("fields.Email"),modelValue:e(o).email,"onUpdate:modelValue":s[1]||(s[1]=a=>e(o).email=a),"error-messages":e(i).email,required:""},null,8,["label","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(G,{label:e(t)("fields.Photo"),modelValue:e(o).photo,"onUpdate:modelValue":s[2]||(s[2]=a=>e(o).photo=a),"error-messages":e(i).photo,accept:".png, .jpg, .jpeg",required:""},null,8,["label","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(b,{label:e(t)("Department"),items:e(d).props.departments,modelValue:e(o).department_id,"onUpdate:modelValue":s[3]||(s[3]=a=>e(o).department_id=a),"error-messages":e(i).department_id,required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(b,{label:e(t)("Roles"),items:e(d).props.roles,modelValue:e(o).roles,"onUpdate:modelValue":s[4]||(s[4]=a=>e(o).roles=a),"error-messages":e(i).roles,multiple:"",required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(b,{label:e(t)("fields.Responsible"),items:e(d).props.countriesOrderedByProcessesCount,modelValue:e(o).responsible_countries,"onUpdate:modelValue":s[5]||(s[5]=a=>e(o).responsible_countries=a),"error-messages":e(i).responsible_countries,"item-title":"code",multiple:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(b,{label:e(t)("Permissions"),items:e(d).props.permissions,modelValue:e(o).permissions,"onUpdate:modelValue":s[6]||(s[6]=a=>e(o).permissions=a),"error-messages":e(i).permissions,multiple:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(w,{label:e(t)("fields.Password"),type:u.value?"text":"password",modelValue:e(o).password,"onUpdate:modelValue":s[7]||(s[7]=a=>e(o).password=a),"error-messages":e(i).password,autocomplete:"new-password","append-inner-icon":u.value?e(W):e(X),"onClick:appendInner":s[8]||(s[8]=a=>u.value=!u.value),required:""},null,8,["label","type","modelValue","error-messages","append-inner-icon"])]),_:1})]),_:1})]),_:1}),l(H,null,{default:r(()=>[l(J,{onClick:e(F),loading:n.value},null,8,["onClick","loading"]),l(Q,{onClick:s[9]||(s[9]=a=>{f.value=!1,p.value=!1,e(v)()}),loading:n.value,disabled:!e(V).valid},null,8,["loading","disabled"]),l(K,{onClick:s[10]||(s[10]=a=>{f.value=!0,p.value=!1,e(v)()}),loading:n.value,disabled:!e(V).valid},null,8,["loading","disabled"]),l(L,{onClick:s[11]||(s[11]=a=>{f.value=!0,p.value=!0,e(v)()}),loading:n.value,disabled:!e(V).valid},null,8,["loading","disabled"])]),_:1})]),_:1}))}};export{_e as default};
