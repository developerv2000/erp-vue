import{u as U,d as S,h as g,v as D,x as _,y as P,z as B,A as E,B as j,c as M,o as O,w as r,a as l,b as e}from"./app-DFGAykv1.js";import{u as R,F as A}from"./vee-validate-bwBYQxrX.js";import{u as I}from"./useVeeFormFields-BYBd5kGd.js";import{u as N}from"./useFormData-CgBSWld4.js";import{u as z}from"./messages-DM6Hzgr9.js";import{D as T}from"./DefaultSheet-dw4Mk5Bv.js";import{_ as w}from"./DefaultTextField-C7s22ckC.js";import{_ as b}from"./DefaultAutocomplete-D2AwreME.js";import{_ as G}from"./DefaultFileInput-DO-RDLJo.js";import{F as H}from"./FormActionsContainer-DhN9f8m4.js";import{_ as J}from"./FormResetButton-eM4AfET6.js";import{_ as K,a as L}from"./FormStoreAndReset-Br8QPaKf.js";import{_ as Q}from"./FormStoreWithoutReseting-CrnYry9j.js";import{m as W,a as X}from"./mdi-_GS73Yti.js";import{V as Y,a as m}from"./VRow-DeYYAS09.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./WrappedLabelGroup-uY5caKSu.js";import"./StandardLabeledGroup-DZwc3k__.js";import"./filter-DJBblzN3.js";import"./DefaultButton-BwBxuaXS.js";const _e={__name:"UsersCreateForm",setup(Z){const{t}=U(),{objectToFormData:C}=N(),n=S(),c=z(),u=g(!1),d=g(!1),p=g(!1),f=g(!1),k=D({name:_().required(),email:_().email().required(),photo:E().required(),department_id:B().required(),roles:P().required().min(1),password:_().required().min(4)}),$={name:"",email:"",photo:null,department_id:null,roles:[],responsible_countries:[],permissions:[],password:null},{errors:i,handleSubmit:y,resetForm:F,setErrors:x,meta:V}=R({validationSchema:k,initialValues:{...$}}),{values:o}=I(Object.keys($)),v=y(q=>{d.value=!0;const s=C(q);j.post(route("administration.users.store"),s).then(()=>{c.addCreatedSuccessfullyMessage(),f.value&&F(),p.value&&window.history.back()}).catch(a=>{a.response?.status===422?(x(a.response.data.errors),c.addFixErrorsMessage()):c.addSubmitionFailedMessage()}).finally(()=>{d.value=!1})});return(q,s)=>(O(),M(e(A),{class:"d-flex flex-column ga-6 pb-8",enctype:"multipart/form-data"},{default:r(()=>[l(T,null,{default:r(()=>[l(Y,null,{default:r(()=>[l(m,{cols:"4"},{default:r(()=>[l(w,{label:e(t)("fields.Name"),modelValue:e(o).name,"onUpdate:modelValue":s[0]||(s[0]=a=>e(o).name=a),"error-messages":e(i).name,required:""},null,8,["label","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(w,{label:e(t)("fields.Email"),modelValue:e(o).email,"onUpdate:modelValue":s[1]||(s[1]=a=>e(o).email=a),"error-messages":e(i).email,required:""},null,8,["label","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(G,{label:e(t)("fields.Photo"),modelValue:e(o).photo,"onUpdate:modelValue":s[2]||(s[2]=a=>e(o).photo=a),"error-messages":e(i).photo,accept:".png, .jpg, .jpeg",required:""},null,8,["label","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(b,{label:e(t)("Department"),items:e(n).props.departments,modelValue:e(o).department_id,"onUpdate:modelValue":s[3]||(s[3]=a=>e(o).department_id=a),"error-messages":e(i).department_id,required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(b,{label:e(t)("Roles"),items:e(n).props.roles,modelValue:e(o).roles,"onUpdate:modelValue":s[4]||(s[4]=a=>e(o).roles=a),"error-messages":e(i).roles,multiple:"",required:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(b,{label:e(t)("fields.Responsible"),items:e(n).props.countriesOrderedByProcessesCount,modelValue:e(o).responsible_countries,"onUpdate:modelValue":s[5]||(s[5]=a=>e(o).responsible_countries=a),"error-messages":e(i).responsible_countries,"item-title":"code",multiple:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(b,{label:e(t)("Permissions"),items:e(n).props.permissions,modelValue:e(o).permissions,"onUpdate:modelValue":s[6]||(s[6]=a=>e(o).permissions=a),"error-messages":e(i).permissions,multiple:""},null,8,["label","items","modelValue","error-messages"])]),_:1}),l(m,{cols:"4"},{default:r(()=>[l(w,{label:e(t)("fields.Password"),type:u.value?"text":"password",modelValue:e(o).password,"onUpdate:modelValue":s[7]||(s[7]=a=>e(o).password=a),"error-messages":e(i).password,autocomplete:"new-password","append-inner-icon":u.value?e(W):e(X),"onClick:appendInner":s[8]||(s[8]=a=>u.value=!u.value),required:""},null,8,["label","type","modelValue","error-messages","append-inner-icon"])]),_:1})]),_:1})]),_:1}),l(H,null,{default:r(()=>[l(J,{onClick:e(F),loading:d.value},null,8,["onClick","loading"]),l(Q,{onClick:s[9]||(s[9]=a=>{f.value=!1,p.value=!1,e(v)()}),loading:d.value,disabled:!e(V).valid},null,8,["loading","disabled"]),l(K,{onClick:s[10]||(s[10]=a=>{f.value=!0,p.value=!1,e(v)()}),loading:d.value,disabled:!e(V).valid},null,8,["loading","disabled"]),l(L,{onClick:s[11]||(s[11]=a=>{f.value=!0,p.value=!0,e(v)()}),loading:d.value,disabled:!e(V).valid},null,8,["loading","disabled"])]),_:1})]),_:1}))}};export{_e as default};
