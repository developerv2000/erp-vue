import{u as k,d as C,s as V,h as u,v as y,x as P,j as S,c as D,o as E,w as r,a as o,g as M,t as N,b as e,C as T}from"./app-DbF7619L.js";import{u as h,a as B,F as U}from"./vee-validate-Cz3A8hOL.js";import{u as j}from"./useFormData-CgBSWld4.js";import{u as q}from"./messages-CVClqrL8.js";import{D as I}from"./DefaultSheet-xxI3phiQ.js";import{_ as L}from"./DefaultTitle-DK6VMU3V.js";import{_ as R}from"./DefaultTextField-D5OAaj5Q.js";import{F as A}from"./FormActionsContainer-CYnXYmO8.js";import{_ as O}from"./FormResetButton-CBqJ6blw.js";import{m as z,a as G}from"./mdi-BINEaKNx.js";import{_ as H,a as J}from"./FormUpdateWithourRedirect-CMzhSllT.js";import{V as K,a as Q}from"./VRow-DBZypA_6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./WrappedLabelGroup-D1FWQrLg.js";import"./DefaultButton-B0FsLInu.js";const fe={__name:"UsersEditPasswordForm",setup(W){const{t:m}=k(),{objectToFormData:v}=j(),w=C(),i=q(),_=V(()=>w.props.record),t=u(!1),n=u(!1),l=u(!1),b=y({new_password:P().required().min(4)}),{handleSubmit:F,setErrors:x,resetForm:f,meta:p}=h({validationSchema:b,initialValues:{}}),{value:d,errorMessage:$}=B("new_password"),c=F(g=>{const a=v(g);t.value=!0,axios.post(route("administration.users.update-password",{record:_.value.id}),a).then(s=>{i.addUpdatedSuccessfullyMessage(),s.data.redirectToLoginPage&&S.visit(route("login"),{data:{logged_out:!0}}),n.value&&!s.data.redirectToLoginPage?window.history.back():f({values:{}})}).catch(s=>{s.response?.status===422?(x(s.response.data.errors),i.addFixErrorsMessage()):i.addSubmitionFailedMessage()}).finally(()=>{t.value=!1})});return(g,a)=>(E(),D(e(U),{class:"d-flex flex-column ga-6 mt-8"},{default:r(()=>[o(I,null,{default:r(()=>[o(L,null,{default:r(()=>[M(N(e(m)("forms.Password update")),1)]),_:1}),o(K,null,{default:r(()=>[o(Q,{cols:"4"},{default:r(()=>[o(R,{label:e(m)("fields.New password"),type:l.value?"text":"password",modelValue:e(d),"onUpdate:modelValue":a[0]||(a[0]=s=>T(d)?d.value=s:null),"error-messages":e($),autocomplete:"new-password","append-inner-icon":l.value?e(z):e(G),"onClick:appendInner":a[1]||(a[1]=s=>l.value=!l.value),required:""},null,8,["label","type","modelValue","error-messages","append-inner-icon"])]),_:1})]),_:1})]),_:1}),o(A,null,{default:r(()=>[o(O,{onClick:e(f),loading:t.value},null,8,["onClick","loading"]),o(H,{onClick:a[2]||(a[2]=s=>{n.value=!0,e(c)()}),loading:t.value,disabled:!e(p).valid},null,8,["loading","disabled"]),o(J,{onClick:a[3]||(a[3]=s=>{n.value=!1,e(c)()}),loading:t.value,disabled:!e(p).valid},null,8,["loading","disabled"])]),_:1})]),_:1}))}};export{fe as default};
