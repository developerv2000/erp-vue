import{u as k,d as C,s as S,h as _,v as D,z as U,c as h,o as w,w as r,a as s,e as y,g as M,t as g,b as e,C as T}from"./app-CNcla55t.js";import{u as B,a as E,F as I}from"./vee-validate-BP8vvQZA.js";import{u as N}from"./useFormData-CgBSWld4.js";import{u as R}from"./messages-B3yuzEH5.js";import{D as q}from"./DefaultSheet-BCT2RDai.js";import{_ as j}from"./DefaultTitle-Rgj9ZNKr.js";import{_ as z}from"./DefaultAutocomplete-C21LX3uu.js";import{F as A}from"./FormActionsContainer-Dv5icPTa.js";import{_ as P}from"./FormResetButton-D7pnRrXA.js";import{_ as G,a as H}from"./FormUpdateWithourRedirect-CZHrp7Bu.js";import{V as J,a as K}from"./VRow-BaErJCZ5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./StandardLabeledGroup-DnmcWqik.js";import"./filter-BnbJ4Nw3.js";import"./DefaultButton-B4VIOlth.js";import"./mdi-_GS73Yti.js";const L={class:"text-body-2 mb-4"},ue={__name:"UsersEditTransferRecords",setup(O){const{t:l}=k(),{objectToFormData:v}=N(),m=C(),i=R(),b=S(()=>m.props.record),t=_(!1),n=_(!1),F=D({to_user_id:U().required()}),{handleSubmit:V,setErrors:x,resetForm:u,meta:c}=B({validationSchema:F,initialValues:{}}),{value:d,errorMessage:$}=E("to_user_id"),f=V(p=>{const a=v(p);t.value=!0,axios.post(route("administration.users.transfer-records",{record:b.value.id}),a).then(()=>{i.addUpdatedSuccessfullyMessage(),n.value?window.history.back():u({values:{}})}).catch(o=>{o.response?.status===422?(x(o.response.data.errors),i.addFixErrorsMessage()):i.addSubmitionFailedMessage()}).finally(()=>{t.value=!1})});return(p,a)=>(w(),h(e(I),{class:"d-flex flex-column ga-6 mt-8 pb-8"},{default:r(()=>[s(q,null,{default:r(()=>[s(j,{"margin-bottom":2},{default:r(()=>[M(g(e(l)("forms.Transfer records")),1)]),_:1}),y("p",L,g(e(l)("forms.Transfer records description")),1),s(J,null,{default:r(()=>[s(K,{cols:"4"},{default:r(()=>[s(z,{label:e(l)("User"),items:e(m).props.users,modelValue:e(d),"onUpdate:modelValue":a[0]||(a[0]=o=>T(d)?d.value=o:null),"error-messages":e($),required:""},null,8,["label","items","modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),s(A,null,{default:r(()=>[s(P,{onClick:e(u),loading:t.value},null,8,["onClick","loading"]),s(G,{onClick:a[1]||(a[1]=o=>{n.value=!0,e(f)()}),loading:t.value,disabled:!e(c).valid},null,8,["loading","disabled"]),s(H,{onClick:a[2]||(a[2]=o=>{n.value=!1,e(f)()}),loading:t.value,disabled:!e(c).valid},null,8,["loading","disabled"])]),_:1})]),_:1}))}};export{ue as default};
