import{u as k,d as C,l as S,h as _,m as D,q as U,c as h,o as w,w as r,a as s,e as y,g as M,t as g,b as e,x as T}from"./app-D1YberCH.js";import{u as B,a as E,F as q}from"./vee-validate-CRXdF8qc.js";import{u as I}from"./useFormData-CgBSWld4.js";import{u as N}from"./messages-PU5sv9nV.js";import{D as R}from"./DefaultSheet-C2bBCKsJ.js";import{_ as j}from"./DefaultTitle-BrPZh_Dp.js";import{_ as A}from"./DefaultAutocomplete-Bqve6lXq.js";import{F as P}from"./FormActionsContainer-DQSaP795.js";import{_ as z}from"./FormResetButton-A_7vTY9q.js";import{_ as G,a as H}from"./FormUpdateWithourRedirect-D8w0K82P.js";import{V as J,a as K}from"./VRow-CxkOp3uG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./StandardLabeledGroup-DleA-fvG.js";import"./filter-CSgERJoA.js";import"./DefaultButton-BPCRPKgW.js";import"./mdi-DZCuF3m0.js";const L={class:"text-body-2 mb-4"},ue={__name:"UsersEditTransferRecords",setup(O){const{t:l}=k(),{objectToFormData:v}=I(),m=C(),i=N(),b=S(()=>m.props.record),t=_(!1),n=_(!1),F=D({to_user_id:U().required()}),{handleSubmit:x,setErrors:V,resetForm:u,meta:c}=B({validationSchema:F,initialValues:{}}),{value:d,errorMessage:$}=E("to_user_id"),f=x(p=>{const a=v(p);t.value=!0,axios.post(route("administration.users.transfer-records",{record:b.value.id}),a).then(()=>{i.addUpdatedSuccessfullyMessage(),n.value?window.history.back():u({values:{}})}).catch(o=>{o.response?.status===422?(V(o.response.data.errors),i.addFixErrorsMessage()):i.addSubmitionFailedMessage()}).finally(()=>{t.value=!1})});return(p,a)=>(w(),h(e(q),{class:"d-flex flex-column ga-6 mt-8 pb-8"},{default:r(()=>[s(R,null,{default:r(()=>[s(j,{"margin-bottom":2},{default:r(()=>[M(g(e(l)("forms.Transfer records")),1)]),_:1}),y("p",L,g(e(l)("forms.Transfer records description")),1),s(J,null,{default:r(()=>[s(K,{cols:"4"},{default:r(()=>[s(A,{label:e(l)("User"),items:e(m).props.users,modelValue:e(d),"onUpdate:modelValue":a[0]||(a[0]=o=>T(d)?d.value=o:null),"error-messages":e($),required:""},null,8,["label","items","modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),s(P,null,{default:r(()=>[s(z,{onClick:e(u),loading:t.value},null,8,["onClick","loading"]),s(G,{onClick:a[1]||(a[1]=o=>{n.value=!0,e(f)()}),loading:t.value,disabled:!e(c).valid},null,8,["loading","disabled"]),s(H,{onClick:a[2]||(a[2]=o=>{n.value=!1,e(f)()}),loading:t.value,disabled:!e(c).valid},null,8,["loading","disabled"])]),_:1})]),_:1}))}};export{ue as default};
