import{u as x,d as D,i as w,c as y,o,w as a,g as n,t as i,b as t,f as m,k as f,a as d,e as g,F as u,r as k,D as P}from"./app-CNcla55t.js";import{u as U}from"./useQueryParams-B_tqYq6J.js";import{u as v}from"./usersTable-DnOFiVEc.js";import{u as F}from"./useDateFormatter-k8y26I7S.js";import{_ as I,a as z,D as A,V as B}from"./TableNavigateToPage-Bp4iRA4g.js";import N from"./UsersTableTop-Cul7aRaK.js";import{T as S}from"./TableDefaultSkeleton-iPYnl6j7.js";import{T as _}from"./TdInertiaLink-CutQCZqt.js";/* empty css                                                                          */import"./queryHelper-zuYrvkeK.js";import"./VTable-o5wX3QKf.js";import"./mdi-_GS73Yti.js";import"./useAuth-CRqt_Kxx.js";import"./FullscreenListItem-251fcmQL.js";import"./DefaultButton-B4VIOlth.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NewRecordButton-DjEPgKlI.js";import"./DeleteSelectedButton-CBpUHTJH.js";import"./messages-B3yuzEH5.js";import"./filter-BnbJ4Nw3.js";import"./InertiaLink-CBa5AfVG.js";const C={class:"d-flex flex-wrap ga-1"},E={class:"d-flex flex-wrap ga-2"},O={key:0},L={key:1},R={key:2},de={__name:"UsersTable",setup($){const{t:c}=x(),{get:T}=U(),b=D(),r=v(),{formatDate:h}=F();w(()=>{(!r.initializedFromInertiaPage||T("initialize_from_inertia_page"))&&r.initFromInertiaPage(b),r.fetchRecords({updateUrl:!0})});function V(l){r.fetchRecordsIfOptionsChanged(l)}return(l,p)=>(o(),y(B,{class:"main-table main-table--limited-height main-table--with-filter",headers:t(b).props.allTableHeaders,modelValue:t(r).selected,"onUpdate:modelValue":p[0]||(p[0]=e=>t(r).selected=e),items:t(r).records,"items-length":t(r).pagination.total_records,page:t(r).pagination.page,"items-per-page":t(r).pagination.per_page,"items-per-page-options":t(A),"sort-by":[{key:t(r).pagination.order_by,order:t(r).pagination.order_direction}],"onUpdate:options":V,loading:t(r).loading,"must-sort":"","show-select":"","show-current-page":"","fixed-header":"",hover:""},{top:a(()=>[d(N)]),loading:a(()=>[d(S)]),"footer.prepend":a(()=>[d(z,{store:t(r)},null,8,["store"])]),"item.edit":a(({item:e})=>[d(I,{link:l.route("administration.users.edit",e.id)},null,8,["link"])]),"item.photo":a(({item:e})=>[d(P,{image:e.photo_url,size:"x-large"},null,8,["image"])]),"item.department_id":a(({item:e})=>[n(i(e.department.abbreviation),1)]),"item.roles_name":a(({item:e})=>[(o(!0),m(u,null,k(e.roles,s=>(o(),m(u,{key:s.id},[d(_,{link:l.route("administration.roles.index",{"id[]":s.id})},{default:a(()=>[n(i(s.name),1)]),_:2},1032,["link"]),p[1]||(p[1]=g("br",null,null,-1))],64))),128))]),"item.permissions_name":a(({item:e})=>[g("div",C,[(o(!0),m(u,null,k(e.permissions,s=>(o(),y(_,{key:s.id,class:"mr-3",link:l.route("administration.permissions.index",{"id[]":s.id})},{default:a(()=>[n(i(s.name),1)]),_:2},1032,["link"]))),128))])]),"item.responsible_country_names":a(({item:e})=>[g("div",E,[(o(!0),m(u,null,k(e.responsible_countries,s=>(o(),m("span",{key:s.id},i(s.code),1))),128))])]),"item.records_count":a(({item:e})=>[e.manufacturers_as_analyst_count?(o(),m("p",O,[n(i(t(c)("fields.Analyst"))+": ",1),d(_,{link:l.route("mad.manufacturers.index",{analyst_user_id:e.id,initialize_from_inertia_page:!0})},{default:a(()=>[n(i(e.manufacturers_as_analyst_count),1)]),_:2},1032,["link"])])):f("",!0),e.manufacturers_as_bdm_count?(o(),m("p",L,[n(i(t(c)("fields.BDM"))+": ",1),d(_,{link:l.route("mad.manufacturers.index",{bdm_user_id:e.id,initialize_from_inertia_page:!0})},{default:a(()=>[n(i(e.manufacturers_as_bdm_count),1)]),_:2},1032,["link"])])):f("",!0),e.comments_count?(o(),m("p",R,i(t(c)("Comments"))+": "+i(e.comments_count),1)):f("",!0)]),"item.created_at":a(({item:e})=>[n(i(t(h)(e.created_at)),1)]),"item.updated_at":a(({item:e})=>[n(i(t(h)(e.updated_at)),1)]),_:1},8,["headers","modelValue","items","items-length","page","items-per-page","items-per-page-options","sort-by","loading"]))}};export{de as default};
