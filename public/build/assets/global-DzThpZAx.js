import{E as n,B as c}from"./app-DwBPyN9G.js";import{u}from"./notifications-CMOEq7M7.js";import{u as f}from"./processesTable-B8qGIdOs.js";import{u as l}from"./processStatusHistoryTable-HMgNHFFe.js";import{u as m}from"./productsTable-DKJLV9wj.js";import{u as S}from"./attachments-BMTIE5qu.js";import{u as d}from"./comments-CzzO5n7Q.js";import{u as h}from"./manufacturersTable-BJFqsxTw.js";import{u as p}from"./useAuth-CQXNO-fQ.js";const{canReceiveNotifications:b}=p(),P=n("global",{state:()=>({loading:!1,unreadNotificationsCount:0,initialized:!1}),actions:{initFromInertiaPage(t){this.initialized||(this.initialized=!0,b()&&(this.checkForUnreadNotifications(),this._interval=setInterval(()=>{this.checkForUnreadNotifications()},120*1e3)))},checkForUnreadNotifications(){c.get(route("api.notifications.unread-count")).then(t=>{const o=t.data;o>this.unreadNotificationsCount&&this.playNotificationSound(),this.unreadNotificationsCount=o})},getAllResetableStores(){const t=u(),o=S(),e=d(),i=h(),s=f(),a=l(),r=m();return[t,o,e,i,s,a,r]},resetAllStores(){this.getAllResetableStores().forEach(o=>{o.resetState()}),this.resetState()},resetState(){this.unreadNotificationsCount=0,this.initialized=!1},playNotificationSound(){new Audio("/audio/notification.mp3").play()}}});export{P as u};
